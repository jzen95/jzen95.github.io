[
  {
    "objectID": "presentations.html",
    "href": "presentations.html",
    "title": "Presentations",
    "section": "",
    "text": "Corporate Finance Day (2025)\nGroningen, Netherlands (presented by co-author)\nNew Zealand Finance Colloquium (2024)\nUniversity of Auckland, Auckland, New Zealand\nAustralasian Banking and Finance Conference (2023)\nUNSW, Sydney, Australia\nAuckland Region Accounting Conference (2023)\nUniversity of Auckland, Auckland, New Zealand\nNew Zealand Finance Meeting (2023)\nAUT, Auckland, New Zealand"
  },
  {
    "objectID": "presentations.html#conference-presentations",
    "href": "presentations.html#conference-presentations",
    "title": "Presentations",
    "section": "",
    "text": "Corporate Finance Day (2025)\nGroningen, Netherlands (presented by co-author)\nNew Zealand Finance Colloquium (2024)\nUniversity of Auckland, Auckland, New Zealand\nAustralasian Banking and Finance Conference (2023)\nUNSW, Sydney, Australia\nAuckland Region Accounting Conference (2023)\nUniversity of Auckland, Auckland, New Zealand\nNew Zealand Finance Meeting (2023)\nAUT, Auckland, New Zealand"
  },
  {
    "objectID": "presentations.html#seminar-presentations",
    "href": "presentations.html#seminar-presentations",
    "title": "Presentations",
    "section": "Seminar Presentations",
    "text": "Seminar Presentations\nUniversity of Auckland PhD Brown Bag Seminar (2024)\nUniversity of Auckland\nUniversity of Auckland PhD Brown Bag Seminar (2023)\nUniversity of Auckland\nUniversity of Auckland Accounting and Finance Department Seminar (2023)\nUniversity of Auckland"
  },
  {
    "objectID": "people.html",
    "href": "people.html",
    "title": "People",
    "section": "",
    "text": "PhD Student\n\n\n\n\n\n\n\n\n\n\n\n\n\nMasters Student\n\n\n\n\n\n\n\n\n\n\n\n\n\nUndergraduate Student\n\n\n\n\n\n\n\n\n\n\n\n\n\nPI\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "people.html#team",
    "href": "people.html#team",
    "title": "People",
    "section": "",
    "text": "PhD Student\n\n\n\n\n\n\n\n\n\n\n\n\n\nMasters Student\n\n\n\n\n\n\n\n\n\n\n\n\n\nUndergraduate Student\n\n\n\n\n\n\n\n\n\n\n\n\n\nPI\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "people.html#alumni",
    "href": "people.html#alumni",
    "title": "People",
    "section": "Alumni",
    "text": "Alumni\n\n\n   \n    \n    \n      Order By\n      Default\n      \n      \n      \n        Name\n      \n      \n        Role\n      \n      \n        Started\n      \n      \n        Ended\n      \n    \n  \n    \n      \n      \n    \n\n\n\n\n\n\n \n\n\n\nName\n\n\n\nRole\n\n\n\nStarted\n\n\n\nEnded\n\n\n\n\n\n\n\n\n\n\n\nAlumni A\n\n\nPhD Alumni\n\n\n2024\n\n\n2025\n\n\n\n\n\n\n\n\n\nAlumni B\n\n\nMasters Alumni\n\n\n2024\n\n\n2025\n\n\n\n\n\n\n\n\n\nAlumni C\n\n\nUndergraduate Alumni\n\n\n2024\n\n\n2025\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "publications.html",
    "href": "publications.html",
    "title": "Publications",
    "section": "",
    "text": "Zeng, J., Huang, P., Lu, Y., Wu, J. G., & Yin, L. (2025). Board gender diversity and firm performance revisited: International evidence. Applied Economics, 1–24. https://doi.org/10.1080/00036846.2024.2439633"
  },
  {
    "objectID": "publications.html#journal-articles",
    "href": "publications.html#journal-articles",
    "title": "Publications",
    "section": "",
    "text": "Zeng, J., Huang, P., Lu, Y., Wu, J. G., & Yin, L. (2025). Board gender diversity and firm performance revisited: International evidence. Applied Economics, 1–24. https://doi.org/10.1080/00036846.2024.2439633"
  },
  {
    "objectID": "publications.html#dissertation",
    "href": "publications.html#dissertation",
    "title": "Publications",
    "section": "Dissertation",
    "text": "Dissertation\nZeng, J. (2025). Three essays on corporate governance and CEO dismissal [Doctoral dissertation, University of Auckland]. ResearchSpace@Auckland."
  },
  {
    "objectID": "publications.html#conference-presentations",
    "href": "publications.html#conference-presentations",
    "title": "Publications",
    "section": "Conference Presentations",
    "text": "Conference Presentations\nZeng, J., Lu, H., & Berkman, H. (2025). Predicting forced CEO turnover using machine learning. Paper presented at the New Zealand Finance Meeting."
  },
  {
    "objectID": "projects.html",
    "href": "projects.html",
    "title": "Projects",
    "section": "",
    "text": "Research projects and collaborations are currently in development. Please check back soon for updates on ongoing work.\nFor inquiries about potential collaborations, please feel free to contact me."
  },
  {
    "objectID": "projects.html#current-projects",
    "href": "projects.html#current-projects",
    "title": "Projects",
    "section": "",
    "text": "Research projects and collaborations are currently in development. Please check back soon for updates on ongoing work.\nFor inquiries about potential collaborations, please feel free to contact me."
  },
  {
    "objectID": "posts/news-title/index.html",
    "href": "posts/news-title/index.html",
    "title": "News item",
    "section": "",
    "text": "About the news"
  },
  {
    "objectID": "posts/news-title/index.html#summary",
    "href": "posts/news-title/index.html#summary",
    "title": "News item",
    "section": "",
    "text": "About the news"
  },
  {
    "objectID": "posts/paper-title/index.html#abstract",
    "href": "posts/paper-title/index.html#abstract",
    "title": "Can quantum-mechanical description of physical reality be considered complete?",
    "section": "Abstract",
    "text": "Abstract\nIn a complete theory there is an element corresponding to each element of reality. A sufficient condition for the reality of a physical quantity is the possibility of predicting it with certainty, without disturbing the system. In quantum mechanics in the case of two physical quantities described by non-commuting operators, the knowledge of one precludes the knowledge of the other. Then either (1) the description of reality given by the wave function in quantum mechanics is not complete or (2) these two quantities cannot have simultaneous reality. Consideration of the problem of making predictions concerning a system on the basis of measurements made on another system that had previously interacted with it leads to the result that if (1) is false then (2) is also false. One is thus led to conclude that the description of reality as given by a wave function is not complete."
  },
  {
    "objectID": "posts/paper-title/index.html#links",
    "href": "posts/paper-title/index.html#links",
    "title": "Can quantum-mechanical description of physical reality be considered complete?",
    "section": "Links",
    "text": "Links\nPublished paper"
  },
  {
    "objectID": "contact.html",
    "href": "contact.html",
    "title": "Contact",
    "section": "",
    "text": "Juebin Zeng\nPhD in Finance\nUniversity of Auckland\nWork E-mail: juebin.zeng at auckland dot ac dot nz\nPersonal E-mail: zengjuebin95 at outlook dot com"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Juebin Zeng",
    "section": "",
    "text": "E-mail\n  \n  \n    \n     LinkedIn\n  \n\n  \n  \nWelcome! I’m Juebin Zeng, a recent PhD graduate in Finance from the University of Auckland. I am currently seeking academic and industry positions in finance.\nMy research focuses on corporate governance, executive turnover, and financial machine learning. I am particularly interested in applying advanced machine learning techniques to understand corporate decision-making and predict executive turnover outcomes.\nFor more details about my background and experience, please visit my About page."
  },
  {
    "objectID": "index.html#recent-posts",
    "href": "index.html#recent-posts",
    "title": "Juebin Zeng",
    "section": "Recent Posts",
    "text": "Recent Posts\nCheck out the latest Data Sharing, Code Sharing, Paper Sharing, and More »\n\n\n\n\n\n\n\n\n\n\nMeasures of Managerial Incentives\n\n\n\nNov 20, 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\nAbout Me\n\n\n\nOct 18, 2025\n\n\n\n\n\n\nNo matching items\n\n\nAll Posts »"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "If you are not redirected, go to About."
  },
  {
    "objectID": "about.html#research-experience",
    "href": "about.html#research-experience",
    "title": "About Me",
    "section": "",
    "text": "Affiliated Doctoral Researcher, Vlerick Business School (Jan 2025 – Sep 2025)\nResearch Assistant, University of Auckland (Dec 2024 – Feb 2025)"
  },
  {
    "objectID": "about.html#teaching-experience",
    "href": "about.html#teaching-experience",
    "title": "About Me",
    "section": "Teaching Experience",
    "text": "Teaching Experience\nGraduate Teaching Assistant, University of Auckland (2022 – 2025)\n\nBusinfo 716 – Business Analytics for FinTech (Lab teaching and material design)\nBusinfo 711 & 718 – Capstone Project (Programming consultant)\nFinance 251 – Financial Management (Tutorial teaching and course development)\nFinance 351, Finance 261, ACCTG 102 (Marking and invigilation)"
  },
  {
    "objectID": "about.html#education",
    "href": "about.html#education",
    "title": "About Me",
    "section": "Education",
    "text": "Education\nPhD in Finance, University of Auckland (2025)"
  },
  {
    "objectID": "about.html#contact",
    "href": "about.html#contact",
    "title": "About Me",
    "section": "Contact",
    "text": "Contact\nWork E-mail: juebin.zeng at auckland dot ac dot nz\nPersonal E-mail: zengjuebin95 at outlook dot com"
  },
  {
    "objectID": "posts.html",
    "href": "posts.html",
    "title": "What’s New & Updated",
    "section": "",
    "text": "Order By\n      Default\n      \n        Title\n      \n      \n        Date - Oldest\n      \n      \n        Date - Newest\n      \n      \n        Author\n      \n    \n  \n    \n      \n      \n    \n\n\n\n\n\n\n\n\n\n\nQuarto Academic Website Examples and Tips\n\n\n\n\n\n\nnews\n\n\n\nExamples and tips for Quarto Academic Website\n\n\n\n\n\nOct 15, 2024\n\n\nDr. Gang He\n\n\n\n\n\n\n\n\n\n\n\n\nEvent item\n\n\n\n\n\n\nevent\n\npresentation\n\n\n\nAbout Event item.\n\n\n\n\n\nSep 3, 2024\n\n\nEvent\n\n\n\n\n\n\n\n\n\n\n\n\nNews item\n\n\n\n\n\n\nnews\n\n\n\nAbout new item\n\n\n\n\n\nJun 24, 2024\n\n\nNews\n\n\n\n\n\n\n\n\n\n\n\n\nCan quantum-mechanical description of physical reality be considered complete?\n\n\nPhysical Review\n\n\n\npaper\n\n\n\nOne is thus led to conclude that the description of reality as given by a wave function is not complete.\n\n\n\n\n\nMay 15, 1935\n\n\nAlbert Einstein, Boris Podolsky, Nathan Rosen\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "pages/publications/index.html",
    "href": "pages/publications/index.html",
    "title": "Publications",
    "section": "",
    "text": "Zeng, J., Huang, P., Lu, Y., Wu, J. G., & Yin, L. (2025). Board gender diversity and firm performance revisited: International evidence. Applied Economics, 1–24. https://doi.org/10.1080/00036846.2024.2439633"
  },
  {
    "objectID": "pages/publications/index.html#journal-articles",
    "href": "pages/publications/index.html#journal-articles",
    "title": "Publications",
    "section": "Journal Articles",
    "text": "Journal Articles\nZeng, J., Huang, P., Lu, Y., Wu, J. G., & Yin, L. (2025). Board gender diversity and firm performance revisited: International evidence. Applied Economics, 1–24. https://doi.org/10.1080/00036846.2024.2439633"
  },
  {
    "objectID": "pages/publications/index.html#dissertation",
    "href": "pages/publications/index.html#dissertation",
    "title": "Publications",
    "section": "Dissertation",
    "text": "Dissertation\nZeng, J. (2025). Three essays on corporate governance and CEO dismissal [Doctoral dissertation, University of Auckland]. ResearchSpace@Auckland."
  },
  {
    "objectID": "pages/publications/index.html#conference-presentations",
    "href": "pages/publications/index.html#conference-presentations",
    "title": "Publications",
    "section": "Conference Presentations",
    "text": "Conference Presentations\nZeng, J., Lu, H., & Berkman, H. (2025). Predicting forced CEO turnover using machine learning. Paper presented at the New Zealand Finance Meeting."
  },
  {
    "objectID": "pages/presentations/index.html",
    "href": "pages/presentations/index.html",
    "title": "Presentations",
    "section": "",
    "text": "Berkman, Henk; Lu, Helen; Zeng, Juebin. (June 10, 2023) Predicting Performance-Induced CEO Dismissals Using Machine Learning. Available at SSRN: https://ssrn.com/abstract=5951814 or http://dx.doi.org/10.2139/ssrn.5951814\n\nWe employ AI models to forecast performance-induced CEO dismissals; demonstrates superior out-of-sample predictive accuracy and reveals market under-reaction to leadership risk.\nPresented at:\n\nUniversity of Auckland Accounting and Finance Department Seminar (2023[me])\nNew Zealand Finance Meeting (2023[me], 2025[co])\nAustralasian Banking and Finance Conference (2023[me])\nAuckland Region Accounting Conference (2023[me])\nNew Zealand Finance Colloquium (2024[me])\nThe 8th Vietnam International Conference in Finance (2024[co])\nCorporate Finance Day (2025[co], Netherlands)\nBeing prepared for EFA and AAA this year\n\n\n“Anti-pledging policy and firm financial constraints”, co-authored with Prof. Henk Berkman and Prof. Helen Lu\n\nWe study how share-pledging restrictions affect cash compensation, firm risk-taking, and valuation for financially constrained firms.\nPresented at:\n\nUniversity of Auckland PhD Brown Bag Seminar (2022[me])"
  },
  {
    "objectID": "pages/presentations/index.html#conference-presentations",
    "href": "pages/presentations/index.html#conference-presentations",
    "title": "Presentations",
    "section": "Conference Presentations",
    "text": "Conference Presentations\nCorporate Finance Day (2025) Groningen, Netherlands\nNew Zealand Finance Colloquium (2024) University of Auckland, Auckland, New Zealand\nThe 8th Vietnam International Conference in Finance (2024) Vietnam\nNew Zealand Finance Meeting (2023, 2025) New Zealand\nAustralasian Banking and Finance Conference (2023) UNSW, Sydney, Australia\nAuckland Region Accounting Conference (2023) University of Auckland, Auckland, New Zealand"
  },
  {
    "objectID": "pages/presentations/index.html#seminar-presentations",
    "href": "pages/presentations/index.html#seminar-presentations",
    "title": "Presentations",
    "section": "Seminar Presentations",
    "text": "Seminar Presentations\nUniversity of Auckland PhD Brown Bag Seminar (2024) University of Auckland\nUniversity of Auckland PhD Brown Bag Seminar (2023) University of Auckland\nUniversity of Auckland Accounting and Finance Department Seminar (2023) University of Auckland"
  },
  {
    "objectID": "pages/people/index.html",
    "href": "pages/people/index.html",
    "title": "People",
    "section": "",
    "text": "Team profiles are being updated. Please check back soon."
  },
  {
    "objectID": "pages/people/index.html#team",
    "href": "pages/people/index.html#team",
    "title": "People",
    "section": "Team",
    "text": "Team\nTeam profiles are being updated. Please check back soon."
  },
  {
    "objectID": "pages/people/index.html#alumni",
    "href": "pages/people/index.html#alumni",
    "title": "People",
    "section": "Alumni",
    "text": "Alumni\nAlumni details will be added after the team page is finalized."
  },
  {
    "objectID": "pages/about/index.html",
    "href": "pages/about/index.html",
    "title": "About Me",
    "section": "",
    "text": "Affiliated Doctoral Researcher, Vlerick Business School (Jan 2025 – Sep 2025)\nResearch Assistant, University of Auckland (Dec 2024 – Feb 2025)"
  },
  {
    "objectID": "pages/about/index.html#research-experience",
    "href": "pages/about/index.html#research-experience",
    "title": "About Me",
    "section": "Research Experience",
    "text": "Research Experience\n\nAffiliated Doctoral Researcher, Vlerick Business School (Jan 2025 - Sep 2025)\nResearch Assistant, University of Auckland (Dec 2024 - Feb 2025)"
  },
  {
    "objectID": "pages/about/index.html#teaching-experience",
    "href": "pages/about/index.html#teaching-experience",
    "title": "About Me",
    "section": "Teaching Experience",
    "text": "Teaching Experience\n\nGraduate Teaching Assistant / Programming Consultant, University of Auckland (2022 - 2025)\n\nBusinfo 716 - Business Analytics for FinTech (lab teaching and material design)\nBusinfo 711 & 718 - Capstone Project (programming consultant)\nFinance 251 - Financial Management (tutorial teaching and course development)\nFinance 351, Finance 261, ACCTG 102 (marking and invigilation)"
  },
  {
    "objectID": "pages/about/index.html#education",
    "href": "pages/about/index.html#education",
    "title": "About Me",
    "section": "Education",
    "text": "Education\n\nPhD in Finance, University of Auckland (2025)\nM.MS in Finance (First Class Honors), University of Waikato (2021)\nPgCert in Computing, Australian National University (2019)\nB.BA in Finance, University of Waikato (2018)"
  },
  {
    "objectID": "pages/about/index.html#contact",
    "href": "pages/about/index.html#contact",
    "title": "About Me",
    "section": "Contact",
    "text": "Contact\nWork email: juebin.zeng@auckland.ac.nz (may expire any day now, thanks to graduation)\nPersonal email: zengjuebin95@outlook.com"
  },
  {
    "objectID": "pages/contact/index.html",
    "href": "pages/contact/index.html",
    "title": "Contact",
    "section": "",
    "text": "Juebin Zeng\nPhD in Finance\nUniversity of Auckland\nWork E-mail: juebin.zeng at auckland dot ac dot nz\nPersonal E-mail: zengjuebin95 at outlook dot com"
  },
  {
    "objectID": "pages/posts/index.html",
    "href": "pages/posts/index.html",
    "title": "What’s New & Updated",
    "section": "",
    "text": "Posts are listed below.\n\n\n\n\n\n\n\n\n\n   \n    \n    \n      Order By\n      Default\n      \n        Title\n      \n      \n        Date - Oldest\n      \n      \n        Date - Newest\n      \n      \n        Author\n      \n    \n  \n    \n      \n      \n    \n\n\n\n\n\n\n\n\n\n\nMeasures of Managerial Incentives\n\n\n\nCode Sharing\n\n\n\nReplication-ready SAS program for delta, vega, and firm-specific wealth.\n\n\n\n\n\nNov 20, 2025\n\n\nJuebin Zeng\n\n\n\n\n\n\n\n\n\n\n\n\nAbout Me\n\n\n\nProfile\n\n\n\nBrief introduction based on my academic and industry experience.\n\n\n\n\n\nOct 18, 2025\n\n\nJuebin Zeng\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "pages/projects/index.html",
    "href": "pages/projects/index.html",
    "title": "Projects",
    "section": "",
    "text": "Research projects and collaborations are currently in development. Please check back soon for updates on ongoing work.\nFor inquiries about potential collaborations, please feel free to contact me."
  },
  {
    "objectID": "pages/projects/index.html#current-projects",
    "href": "pages/projects/index.html#current-projects",
    "title": "Projects",
    "section": "Current Projects",
    "text": "Current Projects\nHere are a few projects I am actively working on (or polishing for the next stage):\n\nPredicting performance-induced CEO dismissal using machine learning Building AI models to forecast performance-driven CEO turnover and examining market reactions to leadership risk. Coauthors: Prof. Henk Berkman (University of Auckland), Prof. Helen Lu (Vlerick Business School)\nAnti-pledging policy and firm financial constraints Studying how share-pledging restrictions affect cash compensation, firm risk-taking, and valuation for financially constrained firms. Coauthors: Prof. Henk Berkman (University of Auckland), Prof. Helen Lu (Vlerick Business School)\nNonlinear pricing of firm characteristics Exploring nonlinear relationships between firm characteristics and expected returns in asset pricing. Coauthors: Solo\n\nFor inquiries about potential collaborations, please feel free to contact me."
  },
  {
    "objectID": "pages/teaching/index.html",
    "href": "pages/teaching/index.html",
    "title": "Teaching",
    "section": "",
    "text": "Teaching materials and course information are being organized. Please check back soon."
  },
  {
    "objectID": "pages/index.html",
    "href": "pages/index.html",
    "title": "Pages",
    "section": "",
    "text": "This is the top-level index for site pages.\n\nAbout\nResearch\nPresentations\nPeople\nTeaching\nPosts\nContact"
  },
  {
    "objectID": "posts/about-me/index.html#short-bio",
    "href": "posts/about-me/index.html#short-bio",
    "title": "About Me",
    "section": "Short Bio",
    "text": "Short Bio\nI am Juebin (Jay) Zeng, a PhD in Finance from the University of Auckland. My research focuses on corporate governance, executive succession, and machine learning applications in finance. I also work on empirical asset pricing and firm value dynamics."
  },
  {
    "objectID": "posts/about-me/index.html#research-interests",
    "href": "posts/about-me/index.html#research-interests",
    "title": "About Me",
    "section": "Research Interests",
    "text": "Research Interests\n\nMachine learning applications in finance\nExecutive succession and corporate governance\nFirm value, innovation, and empirical asset pricing"
  },
  {
    "objectID": "posts/about-me/index.html#education",
    "href": "posts/about-me/index.html#education",
    "title": "About Me",
    "section": "Education",
    "text": "Education\n\nPhD in Finance, University of Auckland (2025)\nM.MS in Finance (First Class Honors), University of Waikato (2021)\nPgCert in Computing, Australian National University (2019)\nB.BA in Finance, University of Waikato (2018)"
  },
  {
    "objectID": "posts/about-me/index.html#selected-experience",
    "href": "posts/about-me/index.html#selected-experience",
    "title": "About Me",
    "section": "Selected Experience",
    "text": "Selected Experience\n\nAffiliated Doctoral Researcher, Vlerick Business School (Jan 2025 - Sep 2025)\nResearch Assistant, University of Auckland (Dec 2024 - Feb 2025)\nGraduate Teaching Assistant / Programming Consultant, University of Auckland (2022 - 2025)"
  },
  {
    "objectID": "posts/about-me/index.html#publications-and-work-in-progress",
    "href": "posts/about-me/index.html#publications-and-work-in-progress",
    "title": "About Me",
    "section": "Publications and Work in Progress",
    "text": "Publications and Work in Progress\n\nZeng, J., Huang, P., Lu, Y., Wu, J. G., & Yin, L. (2025). Board gender diversity and firm performance revisited: international evidence. Applied Economics, 1-24.\nBerkman, H., Lu, H., Zeng, J. Predicting performance-induced CEO dismissals using machine learning. Working paper.\nAnti-pledging policy and firm financial constraints. Working paper."
  },
  {
    "objectID": "posts/about-me/index.html#contact",
    "href": "posts/about-me/index.html#contact",
    "title": "About Me",
    "section": "Contact",
    "text": "Contact\nWork email: juebin.zeng@auckland.ac.nz"
  },
  {
    "objectID": "pages/posts/items/about-me/index.html#short-bio",
    "href": "pages/posts/items/about-me/index.html#short-bio",
    "title": "About Me",
    "section": "Short Bio",
    "text": "Short Bio\nI am Juebin (Jay) Zeng, a PhD in Finance from the University of Auckland. My research focuses on corporate governance, executive succession, and machine learning applications in finance. I also work on empirical asset pricing and firm value dynamics."
  },
  {
    "objectID": "pages/posts/items/about-me/index.html#research-interests",
    "href": "pages/posts/items/about-me/index.html#research-interests",
    "title": "About Me",
    "section": "Research Interests",
    "text": "Research Interests\n\nMachine learning applications in finance\nExecutive succession and corporate governance\nFirm value, innovation, and empirical asset pricing"
  },
  {
    "objectID": "pages/posts/items/about-me/index.html#education",
    "href": "pages/posts/items/about-me/index.html#education",
    "title": "About Me",
    "section": "Education",
    "text": "Education\n\nPhD in Finance, University of Auckland (2025)\nM.MS in Finance (First Class Honors), University of Waikato (2021)\nPgCert in Computing, Australian National University (2019)\nB.BA in Finance, University of Waikato (2018)"
  },
  {
    "objectID": "pages/posts/items/about-me/index.html#selected-experience",
    "href": "pages/posts/items/about-me/index.html#selected-experience",
    "title": "About Me",
    "section": "Selected Experience",
    "text": "Selected Experience\n\nAffiliated Doctoral Researcher, Vlerick Business School (Jan 2025 - Sep 2025)\nResearch Assistant, University of Auckland (Dec 2024 - Feb 2025)\nGraduate Teaching Assistant / Programming Consultant, University of Auckland (2022 - 2025)"
  },
  {
    "objectID": "pages/posts/items/about-me/index.html#publications-and-work-in-progress",
    "href": "pages/posts/items/about-me/index.html#publications-and-work-in-progress",
    "title": "About Me",
    "section": "Publications and Work in Progress",
    "text": "Publications and Work in Progress\n\nZeng, J., Huang, P., Lu, Y., Wu, J. G., & Yin, L. (2025). Board gender diversity and firm performance revisited: international evidence. Applied Economics, 1-24.\nBerkman, H., Lu, H., Zeng, J. Predicting performance-induced CEO dismissals using machine learning. Working paper.\nAnti-pledging policy and firm financial constraints. Working paper."
  },
  {
    "objectID": "pages/posts/items/about-me/index.html#contact",
    "href": "pages/posts/items/about-me/index.html#contact",
    "title": "About Me",
    "section": "Contact",
    "text": "Contact\nWork email: juebin.zeng@auckland.ac.nz"
  },
  {
    "objectID": "pages/posts/items/about-me/index.html#a-quick-hello",
    "href": "pages/posts/items/about-me/index.html#a-quick-hello",
    "title": "About Me",
    "section": "A Quick Hello",
    "text": "A Quick Hello\nI am Juebin (Jay) Zeng. I do finance research, teach a bit, and spend an unreasonable amount of time convincing machines to behave. Most days I work on corporate governance, executive turnover, and how machine learning can help make sense of messy financial data.\nI am currently on the job hunt and happily between roles."
  },
  {
    "objectID": "pages/posts/items/about-me/index.html#what-i-actually-do",
    "href": "pages/posts/items/about-me/index.html#what-i-actually-do",
    "title": "About Me",
    "section": "What I Actually Do",
    "text": "What I Actually Do\n\nModel CEO turnover risk with machine learning (so far the CEOs are still winning)\nStudy corporate governance and firm performance\nTinker with asset pricing and firm value questions"
  },
  {
    "objectID": "pages/posts/items/about-me/index.html#tiny-timeline-no-suits-required",
    "href": "pages/posts/items/about-me/index.html#tiny-timeline-no-suits-required",
    "title": "About Me",
    "section": "Tiny Timeline (No Suits Required)",
    "text": "Tiny Timeline (No Suits Required)\n\nPhD in Finance, University of Auckland (2025)\nM.MS in Finance (First Class Honors), University of Waikato (2021)\nPgCert in Computing, Australian National University (2019)\nB.BA in Finance, University of Waikato (2018)"
  },
  {
    "objectID": "pages/posts/items/about-me/index.html#recent-stops",
    "href": "pages/posts/items/about-me/index.html#recent-stops",
    "title": "About Me",
    "section": "Recent Stops",
    "text": "Recent Stops\n\nFinance Project Analyst (Oxford Finance, 2025) - reviewed loan closures, recalculated settlement interest, and supported remediation reporting.\nAffiliated Doctoral Researcher, Vlerick Business School (2025)\nResearch Assistant, University of Auckland (2024-2025)\nGraduate Teaching Assistant / Programming Consultant, University of Auckland (2022-2025)"
  },
  {
    "objectID": "pages/posts/items/about-me/index.html#writing-corner",
    "href": "pages/posts/items/about-me/index.html#writing-corner",
    "title": "About Me",
    "section": "Writing Corner",
    "text": "Writing Corner\n\nBoard gender diversity and firm performance revisited (Applied Economics, 2025)\nPredicting performance-induced CEO dismissals using machine learning (working paper)\nAnti-pledging policy and firm financial constraints (working paper)"
  },
  {
    "objectID": "pages/posts/items/about-me/index.html#say-hi",
    "href": "pages/posts/items/about-me/index.html#say-hi",
    "title": "About Me",
    "section": "Say Hi",
    "text": "Say Hi\nWork email: juebin.zeng@auckland.ac.nz (may expire any day now, thanks to graduation)\nPersonal email: zengjuebin95@outlook.com"
  },
  {
    "objectID": "pages/posts/items/20251018_about-me/index.html#a-quick-hello",
    "href": "pages/posts/items/20251018_about-me/index.html#a-quick-hello",
    "title": "About Me",
    "section": "A Quick Hello",
    "text": "A Quick Hello\n\nI am Juebin (Jay) Zeng. I do finance research, teach a bit, and spend an unreasonable amount of time convincing machines to behave. Most days I work on corporate governance, executive turnover, and how machine learning can help make sense of messy financial data. Coffee helps; so does a good debugger.\nI am currently on the job hunt and happily between roles.\nI built this site as a simple, durable place to collect my research, code, teaching notes, and other useful materials. Think of it as a public lab notebook, part portfolio, part archive, and part “future me will thank present me” documentation.\nMy work sits at the intersection of executive turnover, corporate governance, and machine learning in finance. I enjoy building models that explain CEO turnover risk, studying how governance shapes firm performance, and exploring asset pricing questions when the data gets messy.\nI completed my PhD in Finance at the University of Auckland (2025), after a M.MS in Finance (First Class Honors) at the University of Waikato (2021). Along the way I also picked up a PgCert in Computing from ANU (2019) and a B.BA in Finance from Waikato (2018).\nOn the research side, I have been an affiliated doctoral researcher at Vlerick Business School (2025) and a research assistant at the University of Auckland (2024-2025). On the teaching side, I have worked as a graduate teaching assistant and programming consultant (2022-2025), supporting analytics labs and capstone projects.\nCoding-wise, I am most at home in Python and Stata, and I also use SQL, R, and a bit of Java. For dashboards and reporting, I reach for Power BI and Tableau, and I still enjoy a good LaTeX draft when it is time to make things look serious.\nI also spent time in industry as a finance project analyst at Oxford Finance (2025), where I reviewed loan closures, recalculated settlement interest, and supported remediation reporting.\nIf you are curious about what I write, please check out my research work for publications, working papers, and projects in progress."
  },
  {
    "objectID": "pages/posts/items/20251018_about-me/index.html#what-i-actually-do",
    "href": "pages/posts/items/20251018_about-me/index.html#what-i-actually-do",
    "title": "About Me",
    "section": "What I Actually Do",
    "text": "What I Actually Do\n\nModel CEO turnover risk with machine learning (so far the CEOs are still winning)\nStudy corporate governance and firm performance\nTinker with asset pricing and firm value questions"
  },
  {
    "objectID": "pages/posts/items/20251018_about-me/index.html#tiny-timeline-no-suits-required",
    "href": "pages/posts/items/20251018_about-me/index.html#tiny-timeline-no-suits-required",
    "title": "About Me",
    "section": "Tiny Timeline (No Suits Required)",
    "text": "Tiny Timeline (No Suits Required)\n\nPhD in Finance, University of Auckland (2025)\nM.MS in Finance (First Class Honors), University of Waikato (2021)\nPgCert in Computing, Australian National University (2019)\nB.BA in Finance, University of Waikato (2018)"
  },
  {
    "objectID": "pages/posts/items/20251018_about-me/index.html#recent-stops",
    "href": "pages/posts/items/20251018_about-me/index.html#recent-stops",
    "title": "About Me",
    "section": "Recent Stops",
    "text": "Recent Stops\n\nFinance Project Analyst (Oxford Finance, 2025) - reviewed loan closures, recalculated settlement interest, and supported remediation reporting.\nAffiliated Doctoral Researcher, Vlerick Business School (2025)\nResearch Assistant, University of Auckland (2024-2025)\nGraduate Teaching Assistant / Programming Consultant, University of Auckland (2022-2025)"
  },
  {
    "objectID": "pages/posts/items/20251018_about-me/index.html#writing-corner",
    "href": "pages/posts/items/20251018_about-me/index.html#writing-corner",
    "title": "About Me",
    "section": "Writing Corner",
    "text": "Writing Corner\n\nBoard gender diversity and firm performance revisited (Applied Economics, 2025)\nPredicting performance-induced CEO dismissals using machine learning (working paper)\nAnti-pledging policy and firm financial constraints (working paper)"
  },
  {
    "objectID": "pages/posts/items/20251018_about-me/index.html#say-hi",
    "href": "pages/posts/items/20251018_about-me/index.html#say-hi",
    "title": "About Me",
    "section": "Say Hi",
    "text": "Say Hi\nWork email: juebin.zeng@auckland.ac.nz (may expire any day now, thanks to graduation)\nPersonal email: zengjuebin95@outlook.com"
  },
  {
    "objectID": "pages/selected-papers/index.html",
    "href": "pages/selected-papers/index.html",
    "title": "Selected Papers",
    "section": "",
    "text": "Selected papers are being prepared. Please check back soon."
  },
  {
    "objectID": "pages/research/index.html#publications",
    "href": "pages/research/index.html#publications",
    "title": "Research",
    "section": "Publications",
    "text": "Publications\n\nJournal Articles\nZeng, J., Huang, P., Lu, Y., Wu, J. G., & Yin, L. (2025). Board gender diversity and firm performance revisited: International evidence. Applied Economics, 1-24. https://doi.org/10.1080/00036846.2024.2439633\n\n\nDissertation\nZeng, J. (2025). Three essays on corporate governance and CEO dismissal [Doctoral dissertation, University of Auckland]. ResearchSpace@Auckland."
  },
  {
    "objectID": "pages/research/index.html#working-papers-near-submission",
    "href": "pages/research/index.html#working-papers-near-submission",
    "title": "Research",
    "section": "Working Papers (Near Submission)",
    "text": "Working Papers (Near Submission)\n\nPredicting performance-induced CEO dismissals using machine learning We employ AI models to forecast performance-driven CEO turnover and examine market reactions to leadership risk. Co-authors: Prof. Henk Berkman (University of Auckland), Prof. Helen Lu (Vlerick Business School)\nAnti-pledging policy and firm financial constraints We study how share-pledging restrictions affect cash compensation, firm risk-taking, and valuation for financially constrained firms. Co-authors: Prof. Henk Berkman (University of Auckland), Prof. Helen Lu (Vlerick Business School)"
  },
  {
    "objectID": "pages/research/index.html#work-in-progress",
    "href": "pages/research/index.html#work-in-progress",
    "title": "Research",
    "section": "Work in Progress",
    "text": "Work in Progress\n\nNonlinear pricing of firm characteristics (solo)"
  },
  {
    "objectID": "pages/research/index.html#current-projects",
    "href": "pages/research/index.html#current-projects",
    "title": "Research",
    "section": "Current Projects",
    "text": "Current Projects\nHere are a few projects I am actively working on (or polishing for the next stage):\n\nPredicting performance-induced CEO dismissal using machine learning Building AI models to forecast performance-driven CEO turnover and examining market reactions to leadership risk. Co-authors: Prof. Henk Berkman (University of Auckland), Prof. Helen Lu (Vlerick Business School)\nAnti-pledging policy and firm financial constraints Studying how share-pledging restrictions affect cash compensation, firm risk-taking, and valuation for financially constrained firms. Co-authors: Prof. Henk Berkman (University of Auckland), Prof. Helen Lu (Vlerick Business School)\nNonlinear pricing of firm characteristics Exploring nonlinear relationships between firm characteristics and expected returns in asset pricing. Co-authors: Solo\n\nFor inquiries about potential collaborations, please feel free to contact me."
  },
  {
    "objectID": "pages/about/index.html#a-quick-hello",
    "href": "pages/about/index.html#a-quick-hello",
    "title": "About Me",
    "section": "A Quick Hello",
    "text": "A Quick Hello\nHi, I am Juebin (Jay) Zeng. I do finance research, teach a bit, and spend an unreasonable amount of time getting machines to behave. Most days I think about corporate governance, executive turnover, and how machine learning can help make sense of messy financial data.\nI am currently on the job hunt and happily between roles, and I am open to opportunities in both industry and academia."
  },
  {
    "objectID": "pages/about/index.html#research-interests",
    "href": "pages/about/index.html#research-interests",
    "title": "About Me",
    "section": "Research Interests",
    "text": "Research Interests\n\nMachine learning applications in finance\nExecutive succession and corporate governance\nFirm value, innovation, and empirical asset pricing"
  },
  {
    "objectID": "pages/about/index.html#industry-experience",
    "href": "pages/about/index.html#industry-experience",
    "title": "About Me",
    "section": "Industry Experience",
    "text": "Industry Experience\n\nFinance Project Analyst (Oxford Finance, 2025)\n\nReviewed loan closures, recalculated settlement interest, and supported remediation reporting."
  },
  {
    "objectID": "pages/about/index.html#publications-and-working-papers",
    "href": "pages/about/index.html#publications-and-working-papers",
    "title": "About Me",
    "section": "Publications and Working Papers",
    "text": "Publications and Working Papers\n\nBoard gender diversity and firm performance revisited (Applied Economics, 2025)\nPredicting performance-induced CEO dismissals using machine learning (working paper)\nAnti-pledging policy and firm financial constraints (working paper)"
  },
  {
    "objectID": "pages/about/index.html#what-i-actually-do",
    "href": "pages/about/index.html#what-i-actually-do",
    "title": "About Me",
    "section": "What I Actually Do",
    "text": "What I Actually Do\n\nModel CEO turnover risk with machine learning\nStudy corporate governance and firm performance\nTinker with asset pricing and firm value questions"
  },
  {
    "objectID": "pages/about/index.html#tiny-timeline-no-suits-required",
    "href": "pages/about/index.html#tiny-timeline-no-suits-required",
    "title": "About Me",
    "section": "Tiny Timeline (No Suits Required)",
    "text": "Tiny Timeline (No Suits Required)\n\nPhD in Finance, University of Auckland (2025)\nM.MS in Finance (First Class Honors), University of Waikato (2021)\nPgCert in Computing, Australian National University (2019)\nB.BA in Finance, University of Waikato (2018)"
  },
  {
    "objectID": "pages/about/index.html#writing-corner",
    "href": "pages/about/index.html#writing-corner",
    "title": "About Me",
    "section": "Writing Corner",
    "text": "Writing Corner\n\nBoard gender diversity and firm performance revisited (Applied Economics, 2025)\nPredicting performance-induced CEO dismissals using machine learning (working paper)\nAnti-pledging policy and firm financial constraints (working paper)"
  },
  {
    "objectID": "pages/about/index.html#say-hi",
    "href": "pages/about/index.html#say-hi",
    "title": "About Me",
    "section": "Say Hi",
    "text": "Say Hi\nWork email: juebin.zeng@auckland.ac.nz (may expire any day now, thanks to graduation)\nPersonal email: zengjuebin95@outlook.com"
  },
  {
    "objectID": "pages/presentations/index.html#footnotes",
    "href": "pages/presentations/index.html#footnotes",
    "title": "Presentations",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nPresented by me.↩︎\nPresented by me.↩︎\nPresented by co-authors.↩︎\nPresented by me.↩︎\nPresented by me.↩︎\nPresented by me.↩︎\nPresented by co-authors.↩︎\nPresented by co-authors.↩︎\nPresented by me.↩︎"
  },
  {
    "objectID": "pages/presentations/index.html#predicting-performance-induced-ceo-dismissals-using-machine-learning",
    "href": "pages/presentations/index.html#predicting-performance-induced-ceo-dismissals-using-machine-learning",
    "title": "Presentations",
    "section": "Predicting Performance-Induced CEO Dismissals Using Machine Learning",
    "text": "Predicting Performance-Induced CEO Dismissals Using Machine Learning\nBerkman, Henk; Lu, Helen; Zeng, Juebin. (June 10, 2023) Available at SSRN: https://ssrn.com/abstract=5951814 or http://dx.doi.org/10.2139/ssrn.5951814\n\nWe employ AI models to forecast performance-induced CEO dismissals; demonstrates superior out-of-sample predictive accuracy and reveals market under-reaction to leadership risk.\nPresented at:\n\nUniversity of Auckland Accounting and Finance Department Seminar (2023)\nNew Zealand Finance Meeting (2023, 2025†)\nAustralasian Banking and Finance Conference (2023)\nAuckland Region Accounting Conference (2023)\nNew Zealand Finance Colloquium (2024)\nThe 8th Vietnam International Conference in Finance (2024†)\nCorporate Finance Day (2025†, Netherlands)\nBeing prepared for EFA and AAA this year"
  },
  {
    "objectID": "pages/presentations/index.html#anti-pledging-policy-and-firm-financial-constraints",
    "href": "pages/presentations/index.html#anti-pledging-policy-and-firm-financial-constraints",
    "title": "Presentations",
    "section": "Anti-pledging policy and firm financial constraints",
    "text": "Anti-pledging policy and firm financial constraints\nCo-authored with Prof. Henk Berkman and Prof. Helen Lu.\n\nWe study how share-pledging restrictions affect cash compensation, firm risk-taking, and valuation for financially constrained firms.\nPresented at:\n\nUniversity of Auckland PhD Brown Bag Seminar (2022)\n\n\n† Presented by co-authors."
  },
  {
    "objectID": "pages/research/index.html#working-papers",
    "href": "pages/research/index.html#working-papers",
    "title": "Research",
    "section": "Working Papers",
    "text": "Working Papers\n\nBerkman, H and Lu, H and Zeng, J, Predicting Performance-Induced CEO Dismissals Using Machine Learning (June 10, 2023). Available at SSRN: https://ssrn.com/abstract=5951814 or http://dx.doi.org/10.2139/ssrn.5951814"
  },
  {
    "objectID": "pages/research/index.html#current-active-projects",
    "href": "pages/research/index.html#current-active-projects",
    "title": "Research",
    "section": "Current Active Projects",
    "text": "Current Active Projects\nHere are a few projects I am actively working on (or polishing for the next stage):\n\nPredicting performance-induced CEO dismissal using machine learning\n\nBuilding AI models to forecast performance-driven CEO turnover and examining market reactions to leadership risk.\nCo-authors: Prof. Henk Berkman (University of Auckland), Prof. Helen Lu (Vlerick Business School)\n\nAnti-pledging policy and firm financial constraints\n\nStudying how share-pledging restrictions affect cash compensation, firm risk-taking, and valuation for financially constrained firms.\nCo-authors: Prof. Henk Berkman (University of Auckland), Prof. Helen Lu (Vlerick Business School)\n\nNonlinear pricing of firm characteristics\n\nExploring nonlinear relationships between firm characteristics and expected returns in asset pricing.\nCo-authors: Solo\n\n\nFor inquiries about potential collaborations, please feel free to contact me."
  },
  {
    "objectID": "pages/posts/items/20251114_deltaCalculation/index.html#background-and-attribution",
    "href": "pages/posts/items/20251114_deltaCalculation/index.html#background-and-attribution",
    "title": "Measures of Managerial Incentives",
    "section": "Background and attribution",
    "text": "Background and attribution\n\nThis post shares a SAS program for computing executive compensation sensitivities to stock price and volatility using ExecuComp, CRSP, and Compustat. The original implementation is by Lalitha Naveen (check out here).\nThanks to Kai Chen, who later modified that code, so it could run end-to-end on WRDS. Because WRDS datasets continue to update, Kai’s self-contained program no longer runs out of the box. The code below is my updated version built on Kai Chen’s revision, with fixes to keep it executable on current WRDS data.\nIf you use this code, please cite the original sources and the methods papers listed below.\nLalitha Naveen also iregularly updates their incentive dataset, and the latest version with a sample period up to 2023 can be found here. If your research is not time-sensitive, I recommend using their dataset directly."
  },
  {
    "objectID": "pages/posts/items/20251114_deltaCalculation/index.html#what-the-code-produces",
    "href": "pages/posts/items/20251114_deltaCalculation/index.html#what-the-code-produces",
    "title": "Measures of Managerial Incentives",
    "section": "What the code produces",
    "text": "What the code produces\nThe program outputs, at the executive-year level (CEO level can be identified by filtering for title = 'CEO'):\n\nDelta: sensitivity of executive wealth to a 1% change in stock price, \\(\\partial W/\\partial P\\).\nVega: sensitivity of executive wealth to a 0.01 change in stock return volatility, \\(\\partial W/\\partial \\sigma\\).\nFirm-specific wealth: value of stock and option holdings (in $000s).\nSeparate components for option delta and stock delta.\n\nThese measures are widely used in the managerial incentives and risk-taking literature."
  },
  {
    "objectID": "pages/posts/items/20251114_deltaCalculation/index.html#key-inputs-and-variables",
    "href": "pages/posts/items/20251114_deltaCalculation/index.html#key-inputs-and-variables",
    "title": "Measures of Managerial Incentives",
    "section": "Key inputs and variables",
    "text": "Key inputs and variables\nThe program uses the following data sources and constructs:\n\nExecuComp (anncomp): executive compensation, holdings, and option grant details.\nCRSP monthly returns: rolling 60-month volatility for each firm.\nCompustat fundamentals: fiscal year boundaries and firm identifiers.\nWRDS Federal Reserve rates: annual risk-free yields for option valuation.\n\nKey variables you will see in the code:\n\nrollingstd: firm-level stock return volatility over the prior 60 months.\nriskfree_rate: annual term structure used for option valuation.\noptiondelta, sharedelta: option and stock delta components.\nnewdelta, newvega: total delta and vega measures."
  },
  {
    "objectID": "pages/posts/items/20251114_deltaCalculation/index.html#how-to-run",
    "href": "pages/posts/items/20251114_deltaCalculation/index.html#how-to-run",
    "title": "Measures of Managerial Incentives",
    "section": "How to run",
    "text": "How to run\n\nUpdate the WRDS connection or local libname statements to match your environment.\nSet start_year and end_year near the top of the program.\nRun the script in SAS (I recommend SAS Studio on WRDS). The final output dataset is delta_vega.sas7bdat, which can be converted to .dta in Stata."
  },
  {
    "objectID": "pages/posts/items/20251114_deltaCalculation/index.html#references",
    "href": "pages/posts/items/20251114_deltaCalculation/index.html#references",
    "title": "Measures of Managerial Incentives",
    "section": "References",
    "text": "References\n\nColes, J. L., Daniel, N. D., and Naveen, L. (2006). Managerial Incentives and Risk-Taking. Journal of Financial Economics 79, 431-468.\nColes, J. L., Daniel, N. D., and Naveen, L. (2013). Calculation of Compensation Incentives and Firm-Related Wealth Using Execucomp: Data, Program, and Explanation. SSRN: https://ssrn.com/abstract=2296381.\nCore, J., and Guay, W. (2002). Estimating the value of employee stock option portfolios and their sensitivities to price and volatility. Journal of Accounting Research 40, 613-630."
  },
  {
    "objectID": "pages/posts/items/20251114_deltaCalculation/index.html#sas-code",
    "href": "pages/posts/items/20251114_deltaCalculation/index.html#sas-code",
    "title": "Measures of Managerial Incentives",
    "section": "SAS code",
    "text": "SAS code\n\n/* * program reads in data from execcomp and calculates         *  */\n/* * delta, vega, and equity portfolio value for all executives * */\n/* %let wrds=wrds-cloud.wharton.upenn.edu 4016; */\n/* options comamid=TCP remote=WRDS; */\n/* signon username=_prompt_; */\n\nlibname mine '~';\noptions nolabel nocenter;\n\n/* rsubmit; */\n\n*==================================================================;\n* OVERVIEW                                                         ;\n*==================================================================;\n* Naveen's orginal program uses three external datasets. As a result, her program is not executable\n* on a standalone basis. I create these three datasets within the new program in order to make this\n* program self-contained and executable through PC/SAS or SSH connection.\n\n* Naveen's program generates delta, vega, and firm-specific wealth for the period 1992-2010.\n* This new program can easily update all measures to the lastest period by specifying the end year.\n\n* The three datasets external to Naveen's original program are:\n\n*    - combined_201111_1_for_wrds\n*          This is a CRSP/Compustat merged dataset containing GVEKY, PERMNO, YEAR (i.e., FYEAR),\n*          FYBEGDT (first day of fiscal year), and FYENDDT (last day of fiscal year, i.e., DATADATE).\n\n*    - exec_roll_vol_fyear_201111_1\n*          By Naveen's definition, this is standard deviation of monthly stock returns estimated\n*          over the 60 months prior to the beginning of the fiscal period (i.e., FYBEGDT).\n\n*    - riskfree_rate\n*          Naveen gets risk-free rates from Fed Reserve website: http://www.federalreserve.gov/releases/h15/data.htm.\n*          These rates can also be accessed on WRDS (\"/wrds/frb\"). Accessing from WRDS enables\n*          the program conveniently self-executable.\n\n* I first recreate the three datasets. For clarity I rename combined_201111_1_for_wrds and\n* exec_roll_vol_fyear_201111_1 to combined_for_wrds and exec_roll_vol_fyear, respectively.\n\n* Naveen makes these measures for the period 1992-2010 available for download.\n* As a double check, I use this program to recreate these measures for the same period by specifying\n* start_year=1992 and end_year=2010. The generated data are not exactly the same as Naveen's.\n* This is not surprising as WRDS continuously updates databases. In fact, the correlation\n* between the new data and Naveen's data is almost one (delta: 99.99%, vega: 99.93%, and\n* firm-specific wealth: 99.99%). The double check suggests that this program successfully replicates\n* Naveen's data.\n\n* Other changes I make to Naveen's code include:\n*\n*     (1) Naveeen add the delta of executive option holdings and the delta of executive stock holdings, and output\n*         the total delta. I also output each component, optiondelta and sharedelta, respectively.\n*\n*     (2) I also correct an error in Naveen's code. For example, Naveen use the following function:\n*                  newdelta = sumSvest_yearend + sumSunvest_yearend + Sshr\n*         This will generate a missing newdelta if any variable on the right hand side is missing, but newdelta\n*         should be missing only when all right-hand-side variables are missing. I correct the error by using the\n*         following function instead:\n*                  newdelta = sum(sumSvest_yearend, sumSunvest_yearend, Sshr)\n\n\n*==================================================================;\n* SPECIFY THE START YEAR AND END YEAR OF THE PERIOD OF INTEREST    ;\n*==================================================================;\n\n %let start_year=1992;\n %let end_year=2025;\n\n\n*==================================================================;\n* GENERATE THREE DATASETS WHICH ARE EXTERNAL TO NAVEEN'S PROGRAM   ;\n*==================================================================;\n\n* Extract Compustat data;\ndata comp1;\n   set comp.funda;\n   where &start_year-6 &lt;= fyear &lt;= &end_year\n      and indfmt='INDL' and datafmt='STD' and popsrc='D' and consol='C';\n   fyenddt=datadate;\n   fybegdt=intnx('month', fyenddt, -11, 'beg');\n   format fyenddt fybegdt date9.;\n   keep gvkey datadate fyear fybegdt fyenddt;\n   rename fyear=year;\nrun;\n\nproc sort data=comp1; by gvkey datadate; run;\n \n* Link GVKEYS to CRSP identifiers;\nproc sql;\n  create table combined_for_wrds\n  as select a.*, b.lpermno as permno\n  from comp1 as a, crspq.ccmxpf_lnkhist as b\n  where a.gvkey=b.gvkey and b.linkprim in ('P', 'C') and\n  b.LINKTYPE in ('LU', 'LC') and\n (b.LINKDT &lt;= a.fyenddt or missing(b.LINKDT)) and (a.fyenddt &lt;= b.LINKENDDT or missing(b.LINKENDDT))\n  order by gvkey, datadate;\nquit;\n\n* Add CRSP monthly return data;\nproc sql;\ncreate table crsp1 as select a.*, b.date, b.ret label=''\nfrom combined_for_wrds as a, crspq.msf as b\nwhere a.permno = b.permno and\n        intck('month', b.date, a.fybegdt) between 1 and 60\norder by gvkey, datadate, date;\nquit;\n\n* Calculate monthly stock return volatility;\nproc means data=crsp1 noprint;\n  var ret;\n  by gvkey datadate year;\n  output out=exec_roll_vol_fyear n=nrollingstd std=rollingstd;\nrun;\n\n* Recreate riskfree_rate table;\ndata rates;\n  set frb.rates_daily;\n  year=year(date);\n  if &start_year &lt;= year &lt;= &end_year;\n  keep date year dgs1 dgs2 dgs3 dgs5 dgs7 dgs10;\nrun;\n\nproc means data=rates noprint;\n  var dgs1 dgs2 dgs3 dgs5 dgs7 dgs10;\n  by year;\n  output out=rates_annual mean=oneyr twoyr threeyr fiveyr sevenyr tenyr;\nrun;\n\ndata riskfree_rate (drop=_TYPE_ _FREQ_);\n  set rates_annual;\n  oneyr=round(oneyr, 0.01);\n  twoyr=round(twoyr, 0.01);\n  threeyr=round(threeyr, 0.01);\n  fiveyr=round(fiveyr, 0.01);\n  sevenyr=round(sevenyr, 0.01);\n  tenyr=round(tenyr, 0.01);\n  fouryr=round(threeyr+(fiveyr-threeyr)/2, 0.01);\n  sixyr=round(fiveyr+(sevenyr-fiveyr)/2, 0.01);\n  eightyr=round(sevenyr+(tenyr-sevenyr)/3, 0.01);\n  nineyr=round(sevenyr+(tenyr-sevenyr)/3*2, 0.01);\nrun;\n\n\n* The following is Naveen's original program. I only change dataset references to make the program self-executable.\n* Please note I do not change Naveen's program comments (including dataset references in program comments). If you\n* want to run SAS codes in her program comments, you have to change them if appropriate.\n\n*==================================================================;\n* READING ANNCOMP DATASET - ANNUAL EXEC-LEVEL AGGREGATE COMPENSATION;\n*===================================================================;\n* this dataset has information on all execs, all years;\n* should have no duplicates by coperol-year;\n\ndata anncomp;\n  set execcomp.anncomp;\n\n* data was pulled as of Nov 2011 so we have only few observations for 2011 fiscal in execcomp;\n\nwhere &start_year &lt;= year &lt;= &end_year;\n\n coperol=co_per_rol;\n shrown=SHROWN_EXCL_OPTS;\n shrowntotal=SHROWN_TOT;\n opts_unvested_num=OPT_UNEX_UNEXER_NUM;\n opts_unvested_val=OPT_UNEX_UNEXER_EST_VAL;\n opts_vested_num=OPT_UNEX_EXER_NUM;\n opts_vested_val=OPT_UNEX_EXER_EST_VAL;\n opts_exercised_num= OPT_EXER_NUM;\n\n* see chk statements below - shrown_excl_opts is missing for some firms even though\n we have shrown_tot.  But shrown_tot cannot be used even if shrown_excl_opts is missing because \n when both are there for a record, they are not very correlated;\n\nkeep gvkey coperol year execid allothpd allothtot bonus \neip_unearn_num eip_unearn_val noneq_incent old_datafmt_flag\n OPTION_AWARDS_BLK_VALUE \nOPTION_AWARDS_FV OPTION_AWARDS_NUM OPTION_AWARDS_RPT_VALUE \nOPTION_AWARDS  opts_exercised_num\n opts_vested_val \n opts_vested_num opts_unvested_val\nopts_unvested_num  OTHANN OTHCOMP  \n RSTKGRNT   SALARY   \n SHROWN  shrowntotal  SHRS_VEST_NUM \n SHRS_VEST_VAL  STOCK_AWARDS_FV  STOCK_AWARDS \n STOCK_UNVEST_NUM  STOCK_UNVEST_VAL \n  TDC1  TITLEANN ltip ceoann defer_rpt_as_comp_tot;\nproc sort nodupkey;\n by coperol year;\nrun;\n\n/**\nproc print data=anncomp (obs=100);\n var coperol year shrown tdc1;\n where coperol=2611;\n run;\n**/\n\n/** coperol 16285 is palmisano of ibm - printing this out as a test case;\n\nproc print data=anncomp;\n where coperol=16285;\n var year old_datafmt_flag tdc1 OPTION_AWARDS_BLK_VALUE \nOPTION_AWARDS_FV OPTION_AWARDS_NUM \n  opts_exercised_num opts_vested_val \n opts_vested_num opts_unvested_val\nopts_unvested_num  shrown shrs_vest_num\nSTOCK_AWARDS_FV   STOCK_UNVEST_NUM  STOCK_UNVEST_VAL ;\n title \"summary stats for ibm palmisano\";\n run;\n\n**/\n\n/**\n* tdc1old is the definition of how execcomp used to calculate tdc1;\n* post 2006, execcomp calculates tdc1 using tdc1new (although they continue to call it TDC1);\n* these are based on information frm S&P;\n* also, we verified that these give same values as tdc1;\n* OPTION_AWARDS and STOCK_AWARDS represent the expensed portion of total stock and option\n  awards made to the CEO including stock and option awards from previous years (per FAS 123R);\n*  we are dropping this going forward as they do not represnet the true annual compensation; \n* manual talks about two additional variables, OPT_UNEX_UNEXER and OPT_UNEX_EXER which represent\n the number of securities underlying the exerciseable and unexercisable options;\n* but these variables do not show up in the execcomp database;\n\n\ndata chk1;\n set anncomp;\n tdc1old=salary+bonus+othann+rstkgrnt+ltip+allothtot\n        +option_awards_blk_value;\n  tdc1new=salary+bonus+noneq_incent+option_awards_fv \n            + stock_awards_fv + defer_rpt_as_comp_tot + othcomp;\ndifftdc1new=tdc1new-tdc1;\ndifftdc1old=tdc1old-tdc1;\nrun;\n\n * below, we find that mean, mix, max and median are all zero, which means we have the right formula for tdc1old and tdc1new above;\n\nproc means data=chk1 n mean median min max;\n var difftdc1old difftdc1new;\n title \"difftdc1old and difftdc1new should be zero\";\nrun;\n\n**/\n\n/**\n* the chk below is to understand the old_datafmt_flag - this should be 0 post 2006;\n\ndata chk2;\n set chk1;\n proc sort nodupkey;\n  by gvkey year;\n proc sort ;\n by year;\nproc means noprint data=chk2;\n by year;\n  var old_datafmt_flag ;\n  output out=out1 mean= old_datafmt_flag ;\n  run;\n\n  proc print data=out1;\n  title \"all have oldformat=1 upto 2005, 15% have oldformat=1 in 2006, \n  and all have oldformat=0 from 2007\";\n  run;\n**/\n\n*=================================================;\n* READING PERSON DATASET - EXEC-LEVEL INFORMATION;\n*=================================================;\n\n/** this dataset has information on executive name, gender, and age;\n* for our program here we only need the fullname so that we can check against proxy statements;\n* if necessary to confirm our understanding ;\n* should have no duplicates by execid;**/\n\ndata person;\n set execcomp.person;\n keep execid exec_fullname ;\n proc sort nodupkey;\n  by execid;\n* proc contents ;\n* title \"information on dataset person\";\nrun;\n\n  proc sql;\n   create table anncomp1\n    as select *\n    from anncomp x left join person y \n    on x.execid=y.execid;\n\nproc sort nodupkey data=anncomp1;\n by coperol year;\n run;\n\n* ===========================;\n* READING IN CODIRFIN DATASET;\n* ===========================;\n* this dataset contains firm level information including aggregate director\n* information. So should not have duplicates by year;\n* data available from 1992-2010;\n* the bs_volatility and bs_yield were used by execcomp to calculate the BS values\n before 2007.  After that they stopped calculating the BS values and started reporting the firm's estimates directly;\n* therefore they stopped reporting the bs_yield and the bs_volatility also after 2007;\n* we calculate the BS_values for the sake of consistency in the same manner before and after 2006.  We therefore\n calculate the dividend yield and volatility using the same approach that execcomp adopted before 2007;\n* the dividend yield that goes into the BS value is the average of the last three years dividend yield \n and the volatility that goes into the BS value is based on estimates over 60 month rolling windows - see below;\n\ndata codirfin;\n set execcomp.codirfin (keep = gvkey year bs_volatility bs_yield divyield shrsout prccf fyr srcdate);\n  execcomp_volatility = bs_volatility;\n\n* given as % but it is used as fraction in formula;\n  execcomp_yield=bs_yield/100;\n\n* found a mistake with dividend yield - for 2007, the dividend includes special dividend of $25 \n  for Alberto Culver, GVKEY=001239.  The annual report indicates that the dividend yield used for\n  B-S (fair value) calculation is 1%. execcomp reports the dividend yield as 0.99%,0.96%\n  and 101%. The last should actually be 0.66% ( =0.165/24.79). Using this, we get the dividend yield\n  of 0.82% (average of last 3 years to be used in B-S, which gives us a more realistic calculated\n  B_S value of $1,011 (in the ballpark of $920 reported by firm);\n\n  if gvkey=\"001239\" and year=2007 then divyield=0.66;\n\n* dividend yield should be a fraction for B_S calculation;\n  divyield=divyield/100;\n\n  keep gvkey year divyield execcomp_volatility execcomp_yield prccf shrsout srcdate fyr;\nproc sort nodupkey;\n  by gvkey year;\n *proc contents data=common.codirfin;\n *  title \"information on dataset codirfin\";\n run;\n\n\n proc sort data=codirfin;\n  by gvkey year;\ndata codirfin;\n set codirfin;\n  lgvkey=lag(gvkey);\n  lyear=lag(year)+1;\n  l2gvkey=lag2(gvkey);\n  l2year=lag2(year)+2;\n  ldivyield=lag(divyield);\n  l2divyield=lag2(divyield);\n  if gvkey^=lgvkey or year^=lyear then ldivyield=.;\n  if gvkey^=l2gvkey or year^=l2year then l2divyield=.;\n  if divyield^=. and ldivyield^=. and l2divyield^=. \n  then estimated_yield= (divyield+ldivyield+l2divyield)/3;\n  if divyield^=. and ldivyield^=. and l2divyield=. \n  then estimated_yield= (divyield+ldivyield)/2;\n  if divyield^=. and ldivyield=. and l2divyield=. \n  then estimated_yield= divyield;\n  if divyield=. and ldivyield=. and l2divyield=. \n  then estimated_yield=.;\n  drop ldivyield l2divyield lgvkey l2gvkey lyear l2year;\nrun;\n\n/**\nproc print data=codirfin;\n where gvkey=\"006066\";\n title \"print of codirfin for ibm\";\n run;\n **/\n\n* ===========================;\n* READING IN COMBINED DATASET;\n* ===========================;\n* going to read in combined_201111_1_for_wrds. This was taken from \n    combined crsp-compustat data from wrds and has fiscal year end date which we need later (in next step);\n* going to merge with codirfin because this dataset has only 1 obs per firm year;\n\ndata combined;\n set combined_for_wrds(keep=gvkey permno year fybegdt fyenddt);\n  where &start_year &lt;= year &lt;=&end_year;\n proc sort nodupkey;\n  by gvkey year;\n  run;\n\n/**\n  proc means data=combined;\n  title \"combined crsp-compustat data from wrds\";\n  run;\n**/\n\nproc sql;\n create table codirfin1\n   as select *\n   from codirfin x left join combined y \n    on  x.gvkey=y.gvkey and x.year=y.year;\n\n* should have no duplicates by gvkey-year;\nproc sort nodupkey data=codirfin1;\n by gvkey year;\n run;\n\n\n* ==========================;\n* SUBSET OF ANNCOMP DATASET ;\n* ==========================;\n/** do not need all of these variables beyond this point - we will only keep part of them and \nthem when we are all done we can merge back the rest of the variables;\nThis makes the program faster;**/\n\ndata anncomp2;\n set anncomp1;\nkeep gvkey coperol year exec_fullname\n old_datafmt_flag option_awards_blk_value\noption_awards_num opts_exercised_num\nopts_vested_num opts_vested_val \nopts_unvested_num opts_unvested_val shrown;  \nrun;\n\n proc sql;\n  create table excomp1\n   as select *\n   from anncomp2 x left join codirfin1 y \n    on x.gvkey=y.gvkey and x.year=y.year;\n\ndata excomp2;\n set excomp1;\n* We want to make sure we pick up firms that have both execcomp and compustat data;\n* about 13,000 obs get dropped at this point;\n if fybegdt=. or fyenddt=. then delete;\n run;\n\n\n/** at this stage, we still have only 1 obs per executive per firm-year;\n* so this should have no duplicates by coperol-year;**/\n\nproc sort nodupkey data=excomp2;\n by coperol year;\n run;\n\n\n* ===========================;\n* READING IN STGRTTAB DATASET;\n* ===========================;\n* this dataset has information on actual stock and option awards for the fiscal year;\n* this is available only from 1992-2006;\n* no duplicates by coperol grant number;\n\ndata stgrttab;\n set execcomp.stgrttab;\n coperol=co_per_rol;\n keep coperol year blkshval exdate expric grntnum mktpric numsecur;\n proc sort nodupkey;\n  by coperol year grntnum;\n*proc contents;\n*   title \"information on dataset stgrttab\";\nrun;\n\n* at htis stage, for each executive per firm-year, we will have as many obs;\n* as the number of grants for that executive ;\n* so this can have more observations than excomp3;\n\nproc sql;\n create table excomp3\n   as select *\n   from excomp2 x left join stgrttab y \n    on x.coperol=y.coperol and x.year=y.year;\n\n* should have no duplicates by coperol-year-grntnum;\n\nproc sort nodupkey data=excomp3;\n by coperol year grntnum;\n run;\n\n\n* ===========================;\n* READING IN EX_BLACK DATASET;\n* ===========================;\n*execcomp used to provide the information on risk-free rate upto 2006 - they discontinuted after that;\n* this has data from 1992-2006 which is needed to do black-scholes values;\n* only 1 obs for each year - so totally 15 rows;\n* we are using this only to check our numbers with execcomp for the period when execcomp used to calculated BS values;\n* this is just to give confidence that the methodology we use to compute BS values is correct;\n* I am downloading the information from federal reserve website later for our calculation of BS values;\n\ndata ex_black;\n set execcomp.ex_black;\n* risk free rate is given as a percentage, need it to be a fraction;\n execcomp_rf=risk_free_rate/100;\n keep execcomp_rf year;\n * proc contents;\n *    title \"information on dataset ex_black\";\n  run;\n\nproc sql;\n create table excomp4\n   as select *\n   from excomp3 x left join ex_black y \n    on  x.year=y.year;\n\n\n* =============================;\n* READING IN VOLATILITY DATASET;\n* =============================;\n* Here we calculate BS value of options granted using execcomp \nmethodology and see if it matches their values reported;\n* execcomp uses divyield and volatility estimates over rolling 3 and 5 year\n    periods in B-S calculations;\n*  they stop providing this as of 2006, so we need to do it ourselves;\n* we do this in common.exec_roll_vol_fyear_201111_1.sas7bdat which uses crsp data to calculate volatilities of monthly stock returns;\n\ndata volatility;\n set exec_roll_vol_fyear;\n where &start_year &lt;= year &lt;= &end_year;\n* we have volatility of monthly returns,\n   converting to annual volatility;\nestimated_volatility=rollingstd*(12**0.5);\nproc sort nodupkey;\n by gvkey year;\nrun;\n\n\n* ===========================================;\n* READING IN RISK-FREE RATES FROM FED WEBSITE;\n* ===========================================;\n* getting the risk-free rates based on Treasury securities;\n* source: fed reserve website (I downloaded to file in excel fed_website_10yrTnote);\n* I download the annual Treasury rates from 1992-2012.  \nwe use the risk free rate corresponding to the actual maturity;\n* note that execcomp assumes 7 year maturity of options and therefore use 7 year risk-free rate\nfor grant date valuation;\n* note that FED website gives only 1,2,3,5,7 and 10 yr rates, I interpolate the numbers for 4,6,8,9 years;\n/*\nproc import OUT= riskfree_rate \n   datafile= \"c:/lalitha/execcomp/federal_reserve_treasury_rates.xlsx\" \n    DBMS=excel REPLACE;\n     SHEET=\"federal_reserve_treasury_rates\"; \n     GETNAMES=YES;\nrun;\n*/\n* proc print data=riskfree_rate;\n* run;\n\n* MERGE RISKFREE RATE DATA WITH VOLATILITY ESTIMATES;\n\nproc sql;\n create table BS_estimates as\n  select * \n  from volatility x left join riskfree_rate y\n   on x.year=y.year;\n\ndata BS_estimates1;\n set BS_estimates;\n * rates are in percentages, need to be in fractions;\n  array X \n   oneyr twoyr threeyr fouryr fiveyr sixyr sevenyr eightyr nineyr tenyr;\n  do over X;\n   X=X/100;\n  end;\n keep estimated_volatility   oneyr twoyr threeyr fouryr fiveyr sixyr \n   sevenyr eightyr nineyr tenyr gvkey year nrollingstd;\n  run;\n\n/**\nproc print data=BS_estimates1 ;\n where gvkey=\"001078\";\n title \"check estimates of BS\";\nrun;\n**/\n\nproc sort nodupkey data=BS_estimates1;\n by gvkey year;\n run;\n\n proc sql;\n  create table excomp5 as\n   select *\n    from excomp4 x left join BS_estimates1 y\n     on x.gvkey=y.gvkey and x.year=y.year;\n\n    \n*WINSORIZE DATA AS IN execcomp METHODOLOGY;\n*==========================================;\n* execcomp winsorizes values of volatility and dividend yield at the 5th and 95th percentile values\n     when calculating B-S values, we follow same procedure;\n\nproc sort data=excomp5;\n by year;\n proc univariate data=excomp5 noprint;\n  by year;\n  var estimated_yield estimated_volatility;\n output out=out1 pctlpts=5 95 pctlpre=estimated_yield estimated_volatility;\n\ndata out1;\n set out1;\nkeep year estimated_yield5 estimated_yield95 estimated_volatility5 estimated_volatility95;\nrun;\n\nproc sort data=excomp5;\n by year;\nproc sort data=out1;\n by year;\ndata excomp6a;\n merge excomp5 (in=A) out1 (in=B);\n  by year;\n   if A;\n*  proc print data=excomp6 (obs=10);\n*   var gvkey year stimated_volatility5 estimated_volatility95 estimated_yield5 estimated_yield95;\n* title \"check winsorizing done\";\n  run;\n\n data excomp6b;\n  set excomp6a;\n   if estimated_yield&gt;estimated_yield95 and estimated_yield^=. then estimated_yield=estimated_yield95;\n   if estimated_volatility&gt;estimated_volatility95 and estimated_volatility^=. then estimated_volatility=estimated_volatility95;\n   if estimated_yield&lt;estimated_yield5 and estimated_yield^=. then estimated_yield=estimated_yield5;\n   if estimated_volatility&lt;estimated_volatility5 and estimated_volatility^=. then estimated_volatility=estimated_volatility5;\n    drop estimated_volatility5 estimated_volatility95 estimated_yield5 estimated_yield95;\nrun;\n\n* computing annual volatililities for using when firms have less than 1 year of data;\n* using the mean estimated volatility for that sample year as in execcomp methodology;\n\n proc sql;\n create table excomp6c as\n  select *, mean(estimated_volatility) as mean_vol, mean(estimated_yield) as mean_yield\n  from excomp6b\n  group by year;\n\n/*\n* the datastep below shows that our volatility numbers are slightly higher than the sp1500 numbers\n  for the period 1992-2003 for which they show the data on their website;\n* our range is from 0.34-0.53 and their range is from 0.31-0.50;\n* they do not show the average div yield in their sample, only the 95th percentile values;\n\n  data chk3;\n   set excomp6c;\n   proc sort nodupkey;\n    by year;\n  proc print data=chk3;\n   var year mean_vol mean_yield;\n   title \"estimated annual volatilities and yields for sp1500 firms\";\n   run;\n*/\n\ndata excomp7;\n set excomp6c;\n\nformat exdate mmddyy10.;\n\n* if we have less than 1 year of data, we use the average volatility of S&P1500 firms following execcomp methodology;\n* for this, I need the averages by year - execcomp reports the numbers they use upto 2003. we use the numbers based on \n our own estimates for all years (see module above);\n\nif nrollingstd&lt;12 and nrollingstd^=. then estimated_volatility=mean_vol; \n\n * same for estimated_volatility - use execcomp volatility upto 2006 if ours is missing, after which they do not report;\n\nif year&lt;=2006 and estimated_volatility=. then estimated_volatility=execcomp_volatility;\n\n* since we are using the execcomp dividend yield numbers to calculate the 3-year rolling\n  averages, we can actually do the computation only for the 3rd year that each firm is there on execcomp;\n* to avoid missing values, we use the actual execcomp 3-year averages till 2006, \n and use the estimated ones from 2007 onwards;\n\n if year&lt;=2006 and estimated_yield=. then estimated_yield=execcomp_yield;\n\n/*\n* execcomp assumes that all grants are issued on july 1st of grant year;\n\nfiscal  data  assumed grant date \nyear    year   for B-S method\nend\n=====   ====    ======\nJan-06  2005    Jul-05\nFeb-06  2005    Jul-05\nMar-06  2005    Jul-05\nApr-06  2005    Jul-05\nMay-06  2005    Jul-05\n\nJun-06  2006    Jul-05\n\nJul-06  2006    Jul-06\nAug-06  2006    Jul-06\nSep-06  2006    Jul-06\nOct-06  2006    Jul-06\nNov-06  2006    Jul-06\nDec-06  2006    Jul-06\n*/\n if fyr&lt;=6 then assumed_grantyear=year-1;\n else assumed_grantyear=year;\n assumed_grantdate=mdy(7,1,assumed_grantyear);\n\n * need to get fiscal year end dates for maturity at fiscal year end;\n\n* two maturity values need to be estimated;\n* one for B-S value that goes in the TDC1 (as of grant date) and the other for\n B-S value that goes into to delta (as of fiscal year end);\n* this is based on difference between exdate and grantdate and between\n exdate and fiscal year end date respectively;\n* execcomp rounds off maturity to nearest whole number;\n* WE ROUND OFF IN DATA CHECKS ONLY TO MAKE SURE WE GET OVER A 0.999 CORRELATION WITH\n execcomp VALUES = GOING FORWARD WE DO NOT ROUND OFF ANYWHERE;\n* ALSO IMPORTANT - EXECUOMP has a 70% HAIRCUT ON TIME TO MATURITY;\n* THIS IS BECAUSE EXECS TYPICALLY EXERCISE EARLIER;\n* CORE AND GUAY DO NOT APPPEAR TO MAKE THIS ASSUMPTION;\n\n* IF WE WISH TO DO A 70% HAIRCUT, DO THE STATEMENTS BELOW;\n* maturity_grantdate=0.7*round((exdate-assumed_grantdate)/365,1);\n* maturity_yearend=0.7*round((exdate-fyenddt)/365,1);\n\n* IF WE WISH TO USE ACTUAL MATURITY RATHER THAN 70% HAIRCUT, DO THE STATEMENTS BELOW;\n maturity_grantdate=(exdate-assumed_grantdate)/365;\n maturity_yearend=(exdate-fyenddt)/365;\n\n if coperol=. then delete;\n\n* see note below for dataset chk4;\n* zero observations where maturity at grant date is negative;\n* but 132 cases where maturity at yearend is negative;\n* seems reasonable to assume maturity is very small - cannot take zero because this comes in denominator \n of delta - assume very small maturity;\n if numsecur^=. and numsecur&gt;0 and \n    maturity_yearend&lt;0 and maturity_yearend^=.\nthen maturity_yearend=0.001; \n drop assumed_grantyear assumed_grantdate;\nrun;\n\n/*\n* if the maturity is negative (happens when we do\n  fiscal year end), it means that the expiry date is before fiscal year end;\n* I find 0 obs that have maturity_grantdate&lt;0;\n* there are 132 obs that have maturity_yearend&lt;0;\n* appears to be cases where options were given to vest immediately;\n* checked two of them in proxy statements (see aaron rents in 2005, exec todd \n evans, coperol 25896 and J Bryant, Kellogg, coperol 28564;\n* so these are coded as maturity=. since we do not know if they\n* have been exercised and converted to shares (we will  then be doublecounting delta);\n* obviously this check has to be done before the final step in the previous program\n is done, which replaces the negatives with zeros;\n\n data chk4;\n  set excomp7;\n  proc sort ;\n  by coperol descending year;\n proc print ;\n  var coperol year fyr fyenddt exdate maturity_grantdate maturity_yearend;\n* where numsecur^=. and numsecur&gt;0 and \n   maturity_grantdate&lt;0  and maturity_grantdate^=.;\n  where numsecur^=. and numsecur&gt;0 and \n    maturity_yearend&lt;0 and maturity_yearend^=.;\n format fyenddt mmddyy10.;\n title \"maturity is negative\";\nrun;\n\nproc means data=excomp7;\n var exdate fyenddt maturity_grantdate maturity_yearend ;\n  where numsecur&gt;0 and numsecur^=.;\n title \"out of 127861 obs for which grants were made, 127353 had exdate available\";\nrun;\n\nproc sql;\n create table chk5 as\n select *, count(coperol) as ctcoperol, count(maturity_grantdate) as ctmat_grantdate\n from excomp7\ngroup by coperol, year;\n\n proc means data=chk5;\n  var maturity_grantdate;\n  title \"checking before we replace missing maturity values\";\n  run;\n*/\n\n*sometimes when there are multiple grants for the same executive in the same year,\ndata on maturity of one option award is missing even though the other awards in \nthat year have data on maturity;\n* in these cases I am going to replace the maturity that is missing with the average \n maturity of the other awards granted to the same executive in the same year;\n* number of obs goes from 127355 to 127523 as per check statement above and below;\n* this changes the mean from 9.0556 to 9.0559;\n\nproc sql;\n create table excomp8 as\n select *, mean(maturity_grantdate) as avg_mat_grantdate,  mean(maturity_yearend) as avg_mat_yearend\n from excomp7\ngroup by coperol, year;\n\ndata excomp9;\n set excomp8;\n if maturity_grantdate=. and avg_mat_grantdate^=. then maturity_grantdate=avg_mat_grantdate;\n if maturity_yearend=. and avg_mat_yearend^=. then maturity_yearend=avg_mat_yearend;\nrun;\n\n/**\n proc means data=excomp9 n mean min p1 p5 p10 p25 p50 p75 p90 p99 max;\n  var maturity_grantdate maturity_yearend;\n  title \"checking after we replace missing maturity values\";\n  run;\n**/\n\n* we can use either the execcomp values or the estimated (by us) values\nof risk-free rate, volatility and divyield;\n* remember that the risk free rate depends on the maturity of the option at year end or grant date;\n\ndata excomp10;\n set excomp9;\n \n* USE THESE NUMBERS IF YOU WANT TO USE PRE-2006 execcomp VALUES;\n* I USE THIS ONLY TO CORRELATE  OUR CALCULATED VALUES WITH execcomp BS VALUES;\n* THIS WILL BE VALID ONLY TILL 2006;\n\n* rfc=execcomp_rf;\n* bs_yield=execcomp_yield;\n* sigma=execcomp_volatility;\n\n\n if round(maturity_yearend,1) =1  then rfc=oneyr;\n if round(maturity_yearend,1) =2  then rfc=twoyr;\n if round(maturity_yearend,1) =3  then rfc=threeyr;\n if round(maturity_yearend,1) =4  then rfc=fouryr;\n if round(maturity_yearend,1) =5  then rfc=fiveyr;\n if round(maturity_yearend,1) =6  then rfc=sixyr;\n if round(maturity_yearend,1) =7  then rfc=sevenyr;\n if round(maturity_yearend,1) =8  then rfc=eightyr;\n if round(maturity_yearend,1) =9  then rfc=nineyr;\n if round(maturity_yearend,1)=10 then rfc=tenyr;\n\n * sometimes maturity is greater than 10;\n if (maturity_yearend^=. and round(maturity_yearend,1)&gt;10) then rfc=tenyr;\n\n bs_yield=estimated_yield;\n sigma=estimated_volatility;\n \n\n  sigmasq=sigma*sigma;\n\n drop execcomp_rf execcomp_yield execcomp_volatility\n   estimated_yield estimated_volatility;\nrun;\n\n/**\nproc print data=excomp10;\n var year rfc sigma sigmasq maturity_yearend maturity_grantdate;\n where coperol=16285;\n title \"ibm checking recall no data will be there post-2006 on options\";\nrun;\n**/\n\n*=========================================;\n* CALCULATE INCENTIVES FOR PRE-2006 PERIOD;\n*=========================================;\n\n* START WITH SENSITIVITY OF CURRENT YEAR OPTIONS;\n*------------------------------------------------;\n* FOR THIS YEAR'S GRANT we can use blk_val as the value of grants this year or calulate \n as per core-guay;\n* execcomp uses 'mktprice' which is the market price on the date of issue of the\noption to calculate B-S value;\n* i do the same for the grant date, but use market price on fiscal year close (prccf) as per\nCore and Guay for the fiscal year end price;\n* execcomp assumes that maturity is only 0.7* maturity as given by exdate;\n* reason - these options are usually exercised earlier;\n* as mentioned above, WE DO NOT use same assumption, but this can be changed easily in the program;\n* I found the value as per the formula below for Vopts_grantdate, using the execcomp\nassumptions and compared it to blk_val, find that the two numbers are very close;\n\ndata excomp11;\n set excomp10;\n\n* sometimes, it appears that the numsecur is missing when it is actually zero;\n* if we compare our nubmers with the numbers in execcomp,\n  they get more observations of option_awards_num compared to our sumnumsecur;\n* to correct for this, i am going to code numsecur=0 if numsecur=.\n  and if the other data on option awards is missing;\n\n if numsecur=. and (exdate=. and expric=. and mktpric=.\n   and option_awards_num=0) then numsecur=0;\n\n* has to be done before we throw out the duplicate coperols;\n* exercise price;\n\n Xc = expric;\n\n * REALIZABLE VALUE AS EXCESS OF S OVER X;\n  realizable_value = (prccf-Xc)*numsecur;\n  if realizable_value&lt;0 then realizable_value=0;\n  if mktpric=. or Xc=. or numsecur=. then realizable_value=.;\n\n* we will calculate two values of Zc, one for B-S value at grant date. This\n is for TDC1. The other is for B-S value at year end. This is for delta and vega;\n\n Zc_yearend = (log(prccf/Xc)+maturity_yearend*(rfc-bs_yield+sigmasq/2))/(sigma*sqrt(maturity_yearend));\n if maturity_yearend=. then Zc_yearend=.;\n\n Zc_grantdate= (log(mktpric/Xc)+maturity_grantdate*(rfc-bs_yield+sigmasq/2))/(sigma*sqrt(maturity_grantdate));\n if maturity_grantdate=. then Zc_grantdate=.;\n\n\n* appendix of core guay paper;\n\n Sc_yearend = exp(-bs_yield*maturity_yearend)*probnorm(Zc_yearend)*numsecur*prccf/100;\n  if Zc_yearend=. then Sc_yearend=.;\n* If it is missing, then we are assuming no option grants were made, and hence zero;\n * if numsecur=. or numsecur=0 then Sc_yearend=0;\n if  numsecur=0 then Sc_yearend=0;\n\n* Black Scholes value of options;\n\n  Vc_grantdate = numsecur*(mktpric*exp(-bs_yield* maturity_grantdate)*probnorm(Zc_grantdate)\n               -Xc*exp(-rfc* maturity_grantdate)*probnorm(Zc_grantdate-sigma*sqrt( maturity_grantdate)));\n  if Zc_grantdate=. then Vc_grantdate=.;\n\n* If it is missing, then we are assuming no option grants were made, and hence zero;\n * if numsecur=. or numsecur=0 then Vc_grantdate=0;\n if numsecur=0 then Vc_grantdate=0;\n\n* introduced for our pay for luck paper, to find the wealth measures;\n \n  if Zc_yearend^=. then do;\n  Vc_yearend = numsecur*(prccf*exp(-bs_yield*maturity_yearend)*probnorm(Zc_yearend)\n               -Xc*exp(-rfc*maturity_yearend)*probnorm(Zc_yearend-sigma*sqrt(maturity_yearend)));\n  end;\n\n  * If it is missing, then we are assuming no option grants were made, and hence zero;\n * if numsecur=. or numsecur=0 then Vc_yearend=0;\n if numsecur=0 then Vc_yearend=0;\n\n* sensitivity with respect to a 0.01 change in stock return volatility;\n* see core and guay appendix A;\n  if Zc_yearend^=. then do;\n   Rc_yearend = exp(-bs_yield* maturity_yearend)*PDF('normal',Zc_yearend,0,1)*prccf*sqrt( maturity_yearend)*0.01*numsecur;\n  end;\n  if Zc_yearend=. or maturity_yearend=. then Rc_yearend=.;\n\n* If it is missing, then we are assuming no option grants were made, and hence zero;\n*  if numsecur=. or numsecur=0 then Rc_yearend=0;\n if numsecur=0 then Rc_yearend=0;\n\n run;\n\n/**\n * note that proc print below is correct only upto 2005;\n * after 2005, ibm is on new reporting format, so reports 2006 onward data in different dataset;\n proc print data=excomp11;\n*  where coperol=16285;\n  where coperol=6;\n   var year rfc bs_yield sigma numsecur maturity_yearend Xc Zc_yearend Sc_yearend Rc_yearend Vc_yearend old_datafmt_flag;\n title \"ibm palmisano check of current year option calculation\"; \nrun;\n **/\n\n* AGGREGATING TRANCHE-LEVEL INFORMATION TO PROVIDE 1 OBS PER EXECUTIVE;\n* since each executive can be given more than 1 option grant in 1 year, I need\n to cumulate the value calculated above for each coperol year combination;\n \nproc sql;\n create table excomp12\n  as select *, sum(Vc_grantdate) as Vopts_grantdate,\n     sum(Vc_yearend) as Vopts_yearend,\n   sum(numsecur) as sumnumsecur,\n    sum(Sc_yearend) as Sopts_grants_yearend,  \n     sum(Rc_yearend) as Ropts_grants_yearend, \n          sum(realizable_value) as sumrealizable_value\n  from excomp11\n  group by coperol,year;\n \n/*\n* when we do this with execcomp 70% haircut on grant date maturity as well as their measures of rf and\n dividend yield and volatility the difference between the two values has a mean of 2%, median of 0%, 10th and 90th of 0% and 5.5%\n  and the correlations between our estimated values and execcomp estimated values are about 0.998;\n* no difference in option number total, and the correlation between our sumnumsecur and option_awards_num=1;\n\n* when we do this with execcomp 70% cut and with our measures of rf and\n dividend yield and volatility the difference between the two values has a mean of 11%, median of 7.5%, and 10th and 90th percentiles of 1.3% and 22%\n and the correlations between our estimated values and execcomp estimated values is 0.992  ;\n\ndata chk6;\n   set excomp12;\n   diff_optvalue=abs(option_awards_blk_value-Vopts_grantdate)/option_awards_blk_value;\n   diff_optnum=abs(option_awards_num-sumnumsecur)/option_awards_num;\n   keep coperol year diff_optvalue exdate maturity_grantdate maturity_yearend\n Vc_grantdate rfc\n Vopts_grantdate sumnumsecur option_awards_blk_value option_awards_num blkshval diff_optnum;\n   proc sort nodupkey;\n    by coperol year;\nrun;\nproc univariate data=chk6;\n var diff_optvalue diff_optnum;\n where year&lt;=2005;\n title \"comparing our values with execcomp\";\n run;\nproc corr data=chk6;\n var option_awards_blk_value Vopts_grantdate;\ntitle \"correlation between our calculated value and execcomp B-S value \n  is over 99.8% using execcomp numbers\";\n where year&lt;=2005;\n run;\n \nproc corr data=chk6;\n var sumnumsecur  option_awards_num;\ntitle \"correlation between our calculated value and reported value in execcomp of total number of options\n  is 100% but number of obs different\";\n where year&lt;=2005;\n run;\n\n* number of observations between sumnumsecur (our calculated total annual grants\n and option_awards_num (execcomp provided number of total grants) are different for 21653 cases;\n* these are cases for which execcomp does not calculate the BS value anyway, i.e., the \n option_awards_blk_value is missing, so it appears that these are problematic cases anyway;\n* so should be ok to ignore them;\n\n proc print data=chk6 (obs=25);\n  where sumnumsecur=. and year&lt;=2005;\n   run;\n\n proc univariate data=chk6;\n  var option_awards_num option_awards_blk_value vopts_grantdate;\n   where sumnumsecur=. and year&lt;=2005;\n   title \"option_awards_blk_value is missing when sumnumsecur is missing but option_awards_num is not missing\";\n   title \"there are about 22151 obs that have this problem\";\n   title \" we can treat these as missing or zero, we leave it as missing\";\n   run;\n*/\n\n* at this point, we are going to keep only 1 observation per executive year;\n* since we have already added up the values of current year's grants, that \n is all we need to keep;\n* going forward, it should always be 1 obs per executive year;\ndata excomp13;\n  set excomp12;\n  if sumnumsecur=0 or sumnumsecur=. then do;\n   Sopts_grants_yearend=0;\n   Vopts_grantdate=0;\n   Ropts_grants_yearend=0;\n   sumrealizable_value=0;\n   Vopts_yearend=0;\n   FVopts_yearend=0;\n  end;\n\n* dropping rfc here, recalculating rf below based on matvest and matunvest;\n* the only reason to calculate Vopts_grantdate was to compare with execcomp;\n* so not keeping this below, not keeping BS values reported by execcomp either;\n keep coperol year Vopts_yearend sumnumsecur Sopts_grants_yearend  \n    Ropts_grants_yearend sumrealizable_value sigma sigmasq bs_yield option_awards_num \n   opts_vested_num opts_unvested_num opts_exercised_num\n    opts_vested_val opts_unvested_val shrown shrsout old_datafmt_flag avg_mat_yearend prccf\n    fybegdt fyenddt oneyr twoyr threeyr fouryr fiveyr sixyr sevenyr eightyr nineyr tenyr exec_fullname;\n\nproc sort nodupkey;\n by coperol year;\nrun;\n\n\n* first take lags of number of vested and unvested options;\n* we use these below to check, see comments;\nproc sort data=excomp13;\n by coperol year;\ndata excomp13a;\n set excomp13;\n lcoperol=lag(coperol);\n lyear=lag(year)+1;\n lag_opts_vested_num=lag(opts_vested_num);\n lag_opts_unvested_num=lag(opts_unvested_num);\n if coperol^=lcoperol or year^=lyear then do;\n  lag_opts_vested_num=. ; lag_opts_unvested_num=.;\n end;\n drop lcoperol lyear ;\nrun;\n/*\n* compare total number of options and total value before and after this exercise;\n* in general, the number of options at the start of the year (lagged values\n* of opts_unvested_num and VESTED NUM) plus additional options granted less \n* options exeercised should be equal to the number of options at the\n* end of the year (sum of opts_vested_num and opts_unvested_num);\n* i.e., lag(opts_unvested_num)+lag(opts_vested_num)+OPTION_AWARDS_NUM\n  = opts_exercised_num + opts_unvested_num + opts_vested_num;\n* appears that this is not always true because of stock splits;\n* specifically, in 18% of cases, this is not true;\n* splits will not affect us as the sensitivties etc depend on both price\n* and number of options, both of which are adjusted;\n* but as in the case of AMR, ALCOA etc, this may mean that we do not find\n* the above equality to hold;\n* also may be the case when there are expired options - not sure how to capture that;\n* also check to see if any of the vested or unvested num or value is negative;\n* should never be, but I find about 1 to 17 obs  have this problem;\n* set them to zero in the next step;\n\ndata chk7;\n  set excomp13a;\n   balance = lag_opts_unvested_num + lag_opts_vested_num + option_awards_num -\n          (opts_exercised_num + opts_unvested_num + opts_vested_num);\n* flag if the balance is greater than 10.  It should be zero, doing 0.010 or 10 options \nto allow for rounding off issues;\n     if abs(balance)&gt;0.010 then flag=1; else flag=0;\n     if opts_unvested_num&lt;0 and opts_unvested_num^=. then flag1=1 ; else flag1=0;\n     if opts_unvested_val&lt;0 and opts_unvested_val^=. then flag2=1 ; else flag2=0;\n     if opts_vested_num&lt;0 and opts_vested_num^=. then flag3=1 ; else flag3=0;\n     if opts_vested_val&lt;0 and opts_vested_val^=. then flag4=1 ; else flag4=0;\n    run;\n\n proc freq data=chk7;\n  tables flag flag1 flag2 flag3 flag4;\n  where year&lt;=2005;\n  title \"flag should be zero typically and flag1-flag4 should be 0\";\n  run;\n  proc means data=chk7 n mean p5 p10 p25 p50 p75 p90 p95;\n   var balance;\n   title \"balance should be zero, but is not. this is because of splits, expiry etc - see note above\";\n   run;\n*/\n\n*=======================================================;\n* NOW COMPUTE SENSITIVITY OF UNVESTED AND VESTED OPTIONS;\n*=======================================================;\n\n* FOR STOCK OF OPTION GRANTS, DO THIS;\n* first, we need the average number of exercisable options, based on the total\nrealizable value of exercisable options reported in the proxy;\n* the realizable value is the excess of stock over exercise price for all exercisable\noptions;\n* then we subtract this from the stock price, which would give the average exercise price;\n* market price used is the average year end market price;\n* set time to maturity for unexercisable options as one year less than the time to maturity\nfor current year options (or 9 if no options in current year);\n* do the same thing for exercisable options, but keep the time to maturity as three\nyears less than the  time to maturity for unexercisable options;\n* subtract current years options from unexercised options portfolio to aviod double\ncounting;\n\ndata excomp13b; \n  set excomp13a;\n* see chk step above to see if any of the vested or unvested num \n   or value is negative. It should never be, but I find about 10 obs\n  have this problem. I set them to zero below;\n\n  if opts_unvested_num&lt;0 and opts_unvested_num^=. then opts_unvested_num=0;\n  if opts_unvested_val&lt;0 and opts_unvested_val^=. then opts_unvested_val=0;\n  if opts_vested_num&lt;0 and opts_vested_num^=. then opts_vested_num=0;\n  if opts_vested_val&lt;0 and opts_vested_val^=. then opts_vested_val=0;\n\n*===============;\n* unexercisable;\n*===============;\n*\n* also, if we assume stock options granted in the year are all unexercisable;\n* then opt_awards_num should be strictly smaller than OPT_UNEX_UNEXER_NUM;\n* not always true however (not true in xxx cases);\n* looks like some options immediately vest;\n* therefore we cannot assume current years options have long vesting;\n* if options issued in current year, then time to maturity is maturity-1, else 9;\n* also, the unexercisable option portfolio has to be reduced by the number of \n  options granted that year and the value of options granted that year should be \n  reduced from total realizable value of unexercisable options ;\n* need to adjust the unexercisable options by the number granted that year;\n* that's because we separately calculate the deltas for these;\n* assuming all current year's options are unvested;\n\n opts_unvested_num_excl_curryear = opts_unvested_num - option_awards_num;\n\n* sumrealizable_value represents the aggregate  value of all the options awarded that year to each exec;\n* so it is numsecur*(fiscal year end price - exercise price) aggregated across all stock grants during year;\n* by subtracting this from opts_unvested_val, we get the aggregate value of unvested options that were \n  granted in prior years (which = opts_unvested_val_excl_curryear);\n* for example, assume that UNVEST_NUM=40, OPTION_AWARDS_NUM=50;\n* that means that some of the awards given this year vested immediately;\n* first we assume that these were not exercised, then we adjust for possible exercise;\n* see notes below;\n* in the example here, we reduce the current year's portfolio of unvested options\n  to zero, because we are separetly considering the 50 options that were granted;\n* the 10 options that were given in the current year are reduced from the stock \n* of vested options;\n\n  opts_unvested_val_excl_curryear = opts_unvested_val-sumrealizable_value;\n  opts_vested_num_excl_curryear =  opts_vested_num;\n  opts_vested_val_excl_curryear =  opts_vested_val;\n  if  opts_unvested_num_excl_curryear^=. and opts_unvested_num_excl_curryear&lt;0 \n  then do;\n   opts_unvested_num_excl_curryear=0;\n   opts_unvested_val_excl_curryear =0;\n   opts_vested_num_excl_curryear= opts_vested_num + (opts_unvested_num - option_awards_num);\n   opts_vested_val_excl_curryear= opts_vested_val + (opts_unvested_val-sumrealizable_value);\n  end;\n  if  opts_unvested_val_excl_curryear^=. and opts_unvested_val_excl_curryear&lt;0 \n   then  opts_unvested_val_excl_curryear=0;\nrun;\n\n/*\nproc means data=excomp13b n  mean p5 p25 p50 p75 p95;\n var opts_unvested_num_excl_curryear;\n where opts_unvested_num_excl_curryear&lt;0 and opts_unvested_num_excl_curryear^=.;\n   title \"should be no observations here\";\nrun;\nproc means data=excomp13b n  mean p5 p25 p50 p75 p95;\n var opts_unvested_val_excl_curryear;\n where opts_unvested_val_excl_curryear&lt;0 and opts_unvested_val_excl_curryear^=.;\ntitle \"should be no observations here\";\nrun;\n proc means data=excomp13b n  mean p5 p25 p50 p75 p95;\n var opts_vested_num_excl_curryear;\n where opts_vested_num_excl_curryear&lt;0 and opts_vested_num_excl_curryear^=.;\ntitle \"should be no observations here\";\nrun;\n proc means data=excomp13b n  mean p5 p25 p50 p75 p95;\n var opts_vested_val_excl_curryear;\n where opts_vested_val_excl_curryear&lt;0 and opts_vested_val_excl_curryear^=.;\ntitle \"should be no observations here\";\nrun;\n*/\n\n* checked that all opts_unvested_num_excl_curryear and opts_unvested_val_excl_curryear\n   are now zero or positive;\n  \n* checked that all opts_unvested_num are now zero or positive;\n* some cases (3790 obs) of opts_vested_num are now negative;\n* these have to be cases where all or part of current years\n* grant was exercisable immediately, and some were actually exercised;\n* in this case, we check if overall equality (see earlier comment) holds;\n* if not, drop these obs becuase it is not clear what is going on (even from proxy);\n* ROUND function below matches at 100th place-that is if the difference is less than 100 options, we consider it ok;\n* this is only to make sure that rounding off error is not responsible for failure to match;\n* if the equality holds, then we need to replace opts_vested_num_excl_curryear to zero;\n\ndata excomp13c;\n set excomp13b;\n if opts_vested_num_excl_curryear&lt;0 and opts_vested_num_excl_curryear^=. then \n  if round((opts_unvested_num +  opts_vested_num),0.1)=round((LAG_opts_unvested_num + LAG_opts_vested_num + OPTION_AWARDS_NUM - opts_exercised_num),0.1) \n   then do;\n   opts_vested_num_excl_curryear=0; opts_vested_val_excl_curryear=0;\n   DUMMY1=1;\n  end; \n\n* if the equality does not hold, then we need to replace all values to missing;\n\n  if opts_vested_num_excl_curryear&lt;0 and opts_vested_num_excl_curryear^=. then \n  if round((opts_unvested_num +  opts_vested_num),0.1)^=round((LAG_opts_unvested_num + LAG_opts_vested_num + OPTION_AWARDS_NUM - opts_exercised_num),0.1) \n   then do;\n     opts_unvested_num_excl_curryear=.; opts_unvested_val_excl_curryear=.;\n     opts_vested_num_excl_curryear=.; opts_vested_val_excl_curryear=.;\n     DUMMY2=1;\n  end;\n\n* after these adjustments, still opts_vested_val_excl_curryear is negative for some cases,\n although for some it is just rounding off error, going to make this zero for everyone;\n* may be because the dates/assumptions we use for SUMREALIZABLE_VALUE are slightly \n* different from dates used  by company;\n\n  if opts_vested_val_excl_curryear&lt;0 and opts_vested_val_excl_curryear^=. \n   then opts_vested_val_excl_curryear=0;\nrun;\n\n /**\n proc means data=excomp13c ;\n var dummy1 dummy2;\ntitle \"checking how many observations had vested_num or vested_val is negative\";\nrun;\n**/\n\ndata excomp14;\n set excomp13c;\n* maturity of unercisable set at 9 years or actual minus 1;\n  if option_awards_num^=. and option_awards_num&gt;0 \n    then matunvest=avg_mat_yearend-1;\n  else matunvest=9;\n  if matunvest&lt;0 and matunvest^=. then matunvest=0.001;\n\n* dont make it zero because the Z function uses this in denominator;\n*  if matunvest&lt;0 then matunvest=1;\n\n if round(matunvest,1) &lt;=1 then rfunvest=oneyr;\n if round(matunvest,1) =2  then rfunvest=twoyr;\n if round(matunvest,1) =3  then rfunvest=threeyr;\n if round(matunvest,1) =4  then rfunvest=fouryr;\n if round(matunvest,1) =5  then rfunvest=fiveyr;\n if round(matunvest,1) =6  then rfunvest=sixyr;\n if round(matunvest,1) =7  then rfunvest=sevenyr;\n if round(matunvest,1) =8  then rfunvest=eightyr;\n if round(matunvest,1) =9  then rfunvest=nineyr;\n if round(matunvest,1)=10  then rfunvest=tenyr;\n\n* sometimes maturity is greater than 10;\n if (matunvest^=. and round(matunvest,1)&gt;10) then rfunvest=tenyr;\n \n* if Xunvest&lt;0 then presumably the option is deep in the money;\n* so we reset the exercise price to be very small;\n  if opts_unvested_num_excl_curryear^=0 then \n      Xunvest=prccf-(opts_unvested_val_excl_curryear/opts_unvested_num_excl_curryear);\n  if (Xunvest&lt;0 and Xunvest^=.) then Xunvest=0.01;\n\n  Zunvest = (log(prccf/Xunvest)+  matunvest*(rfunvest-bs_yield+sigmasq/2))/(sigma*sqrt(matunvest));\n\n  if matunvest=. or matunvest&lt;0 then Zunvest=.;\n  if opts_unvested_val_excl_curryear=. or opts_unvested_val_excl_curryear&lt;0 \n   or opts_unvested_num_excl_curryear&lt;0 or opts_unvested_num_excl_curryear=. then Zunvest=.;\n\n  if opts_unvested_val_excl_curryear=. or opts_unvested_val_excl_curryear&lt;0 \n   or opts_unvested_num_excl_curryear&lt;0 or opts_unvested_num_excl_curryear=. then FZunvest=.;\n\n  Sunvest = exp(-bs_yield* matunvest)*probnorm(Zunvest)*(prccf/100)*opts_unvested_num_excl_curryear;\n\n* sensitivity with respect to a 0.01 change in stock return volatility;\n* see core and guay appendix A;\n  if Zunvest^=. then do;\n   Runvest = exp(-bs_yield* matunvest)*PDF('normal',Zunvest,0,1)*prccf*sqrt( matunvest)*0.01*opts_unvested_num_excl_curryear;\n  end;\n  if Zunvest=. then Runvest=.;\n\n*value of option portfolio ($000);\n  Vunvest = opts_unvested_num_excl_curryear*(prccf*exp(-bs_yield* matunvest)*probnorm(Zunvest)\n                     -Xunvest*exp(-rfunvest* matunvest)*probnorm(Zunvest-sigma*sqrt( matunvest)));\n  if opts_unvested_num_excl_curryear=. or Zunvest=. then Vunvest=.;\n\n\n*============;\n* exercisable;\n*============;\n* maturity is 3 years less than that of unexercisable - dont make it zero because the Z function uses this in denominator;\n  matvest=matunvest-3;\n  if matvest&lt;0 and matvest^=. then matvest=0.001;\n\n  Xvest=prccf-(opts_vested_val_excl_curryear/opts_vested_num_excl_curryear);\n* if Xvest&lt;0 then presumably the option is deep in the money;\n* so we reset the exercise price to be very small;\n  if (Xvest&lt;0 and Xvest^=.) then Xvest=0.01;\n\n if round(matvest,1) &lt;=1 then rfvest=oneyr;\n if round(matvest,1) =2  then rfvest=twoyr;\n if round(matvest,1) =3  then rfvest=threeyr;\n if round(matvest,1) =4  then rfvest=fouryr;\n if round(matvest,1) =5  then rfvest=fiveyr;\n if round(matvest,1) =6  then rfvest=sixyr;\n if round(matvest,1) =7  then rfvest=sevenyr;\n if round(matvest,1) =8  then rfvest=eightyr;\n if round(matvest,1) =9  then rfvest=nineyr;\n if round(matvest,1)=10  then rfvest=tenyr;\n\n* sometimes maturity is greater than 10;\n if (matvest^=. and round(matvest,1)&gt;10) then rfvest=tenyr;\n\n  Zvest = (log(prccf/Xvest)+  matvest*(rfvest-bs_yield+sigmasq/2))/(sigma*sqrt(matvest));\n  if matvest=. or matvest&lt;0 then Zvest=.;\n  if opts_vested_val_excl_curryear=. or opts_vested_val_excl_curryear&lt;0 \n   or opts_vested_num_excl_curryear&lt;0 or opts_vested_num_excl_curryear=. \n   then Zvest=.;\n\n* sensitivity of option to 1 percent change in stock price;\n* appendix of core guay paper;\n\n Svest = exp(-bs_yield* matvest)*probnorm(Zvest)*(prccf/100)*opts_vested_num_excl_curryear;\n\n* sensitivity to stock return volatility;\n  if Zvest^=. then do;\n   Rvest = exp(-bs_yield* matvest)*PDF('normal',Zvest,0,1)*prccf*sqrt( matvest)*0.01*opts_vested_num_excl_curryear;\n  end;\n  if Zvest=. then Rvest=.;\n\n  Vvest = opts_vested_num_excl_curryear*(prccf*exp(-bs_yield*matvest)*probnorm(Zvest)\n                     -Xvest*exp(-rfvest*matvest)*probnorm(Zvest-sigma*sqrt(matvest)));\n  if opts_vested_num_excl_curryear=. or Zvest=. then Vvest=.;\n\n\n* sensitivity of shareholdings;\n Sshr= shrown*prccf/100;\n\n* remember that shrown is also in 000s;\n\nVshr = shrown*prccf;\n\n * sometimes both opts_unvested_val_excl_curryear and opts_unvested_num_excl_curryear are zero;\n  * in this case, the Xunvest cannot be computed because opts_unvested_val_excl_curryear/opts_unvested_num_excl_curryear is not defined;\n  * for example, for ABBOTT LABS in 1998, the # current year stock option grants was 1944.36, but # unvested options at end of year was\n   only 1399.22, so we adjust the  number of unvested excluding current year to be zero, then the number of vested is adjusted downward \n    from the reported value of 1100 to (1100-(1944-1399)) = 555;\n  * in this case, we still get Vunvest, Runvest etc. to be missing, so we have to set it equal to zero;\n\n* overall sensitivity;\n* we do not want to make delta=. if one of the components is missing; \n if opts_vested_num_excl_curryear=0 then do;\n    Svest=0;\n    Rvest=0;\n    Vvest=0;\n end;\n if opts_unvested_num_excl_curryear=0 then do;\n    Sunvest=0;\n    Runvest=0;\n    Vunvest=0;\n end;\n\n*execcomp reports restricted stock where possible along with the sharebased holdings;\n* so we do not include restricted stock as part of the delta;\n* email from execcomp: \"For (stock ownership) item we are using the Stock-Based Holdings column \n which includes the restricted stock.  We have also made corrections to past years.  \n As with much of the execcomp database, what we collect is largely dependent on how the company reports the data.  \n When possible we will try to include restricted stock with this item, however sometimes the company doesn't \n provide a concise picture and it's not possible\";\n\n  delta = sum(Svest, Sunvest, Sopts_grants_yearend, Sshr);\n  optiondelta = sum(Svest, Sunvest, Sopts_grants_yearend);\n  sharedelta = Sshr;\n\n  Ropt = sum(Rvest, Runvest, Ropts_grants_yearend);\n\n* firm-related wealth;\n Vportfolio_yearend = sum(Vvest, Vunvest, Vopts_yearend, Vshr);\n\n \n *IMPORTANT = WE TAKE VARIABLES SUCH AS NUMBER OF VESTED AND UNVESTED FROM ANNCOMP TABLE\nAS SUCH THESE ARE AVAILABLE FOR BOTH OLD AND NEW FORMAT DATA BECAUSE ANNCOMP PRESENTS AGGREGATES. \nSO FOR EXAMPLE, WE USE THE DATA VARIABLE OPTS_VESTED_NUM AND OPTS_UNVESTED_NUM FOR THE PORTFOLIO\n OF VESTED AND UNVESTED USING OLD METHOD. BUT THIS IS AVAILABLE POST-2006. ALSO, WE ASSUME\n MATUNVEST=9 IF NO OPTION GRANTS IN CURRENT YEAR. GIVEN THIS, AND OTHER ASSUMPTIONS WE MAKE, WE COULD END\n UP CALCULATING VEGA AND DELTA FOR THE OBSERVATIONS WHICH HAVE DETAILED DATA IN OUTSTANDINGAWARDS TABLE.\n TO MAKE SURE WE DO NOT DO THAT, USE THE FOLLOWING STEP;\n\n if old_datafmt_flag=0 then do;\n    Svest=.; Sunvest=.; Sopts_grants_yearend=.; Sshr=.;\n    Ropt=.; Rvest=.;  Runvest=.; Ropts_grants_yearend=.;\n    Vportfolio_yearend=.; Vvest=.;  Vunvest=.; Vopts_yearend=.; Vshr=.;\n    delta=.;     \nend;\n\nrun;\n\n/**\n proc print data=excomp14;\n  where coperol=16285;\n*  var Zvest prccf Xvest matvest rfvest bs_yield sigmasq sigma matvest;\n  var year bs_yield  matunvest Xunvest matvest Xvest Zvest sumnumsecur\nopts_unvested_num opts_unvested_val \n  opts_unvested_num_excl_curryear opts_unvested_val_excl_curryear\n    opts_vested_num_excl_curryear opts_vested_val_excl_curryear\n      Vopts_yearend \n    Svest Sunvest Sopts_grants_yearend sshr \n    Rvest Runvest Ropts_grants_yearend \n  ropt delta  ;\n title \"ibm palmisano check of current year option calculation\"; \nrun;\n**/\n/*\nproc print data=excomp14 ;\nwhere coperol=16285 and year&gt;1997;\n var year matvest matunvest opts_vested_num_excl_curryear opts_vested_val_excl_curryear opts_unvested_num_excl_curryear opts_unvested_val_excl_curryear Xvest Xunvest \n  Zvest Zunvest Svest Sunvest sumrealizable_value Rvest Runvest Vvest Vunvest; \ntitle \"checking vested and unvested option values for ibm\";\n run;\nproc print data=excomp14 (obs=100);\n var coperol year delta ropt shrown;\n*where coperol=16285 and year&gt;1997;\n where coperol=2611;\n run;\n proc sort data=excomp14;\n  by year;\n proc means noprint data=excomp14;\n  by year;\nvar delta ropt  ;\noutput out=out4 mean = delta  ropt ;\nproc print data=out4;\n title \"checking means of calculated delta and vega by year\";\nrun;\n\ndata chk8;\n set excomp14;\n where (delta=. and ropt^=.);\n proc means;\n var shrown;\n  title \"appears that when ropt is not missing but delta is missing, it is because share ownership is missing\";\n  title2 \"2 obs only have shrownpc when delta is missing, ropt is not missing\";\nrun;\ndata chk9;\n set excomp14;\n where (delta^=. and ropt=.);\n  title \"appears that when delta is not missing, ropt is not missing\";\nrun;\n**/\n\ndata excomp15;\n set excomp14;\n * dropping these variables because in the next step, we are merging back with full anncomp\n dataset that has these variables already;\n keep coperol year delta optiondelta sharedelta ropt Vportfolio_yearend exec_fullname;\n  run;\n\n* now merge back the anncomp full dataset = recall that we have been working with a \n    subset to make the program faster;\nproc sql;\n create table excomp16 as \n  select *\n   from excomp15 x left join anncomp y\n    on x.coperol=y.coperol and x.year=y.year;\n\n/**\n*===============================;\n* READ DATA ON PLAN BASED AWARDS;\n*===============================;\n* data from 2006 onwards;\n* has no duplicates by coperol-year-grntnum;\n*  WRDS says that earlier, grantnum referred to the grant number;\n* that is, it uniquely identified each option grant award;\n* now it identifies any award - stock, option,equity, and non-equity incentive plan awards;\n* WE DO NOT USE THIS DATA ANYWHERE IN THIS PROGRAM - SEE NOTES IN MAIN PAPER AS TO WHY;\n* WE HAVE A SEPARATE PROGRAM THAT  VALUES THESE AWARDS (EIP_VALUE.SAS);\n\ndata planbasedawards;\nset common.planbasedawards;\ncoperol=co_per_rol;\n* round off the expric since this is sometimes rounded off in outstanding\n table but not in the planbased table, which creates problems with the merge;\n  expric = round(expric,0.01);\n\nkeep gvkey coperol year grntnum  \n act_date eq_max eq_targ eq_thres expric fair_value \n grant_date mktpric non_eq_max non_eq_targ non_eq_thres\n opts_grt shares_grt;\nproc sort nodupkey;\n by coperol year grntnum;\n*proc contents;\n *  title \"information on dataset planbasedawards\";\nrun;\n\nproc print data=planbasedawards;\nvar coperol year grntnum mktpric expric grant_date\n opts_grt shares_grt;\n  where coperol=16285;\n  title \"plan based awards table for ibm samuel palmisano\";\nrun;\n\n* the planbased awards are options/stocks/other awards during the year;\n* if opts_grt&gt;0, we take it as an straight option award;\n* if shares_grt&gt;0, we take it as a straight share award;\n* we will use B-S value of option grants as on grant date for TDC1 adjustment \n* we do not need this for the delta and vega and wealth as these are determined as on fiscal year end and are\n  based on options in the outstanding awards table;\n* similarly, for stock grants, we will use the grant date value for TDC1 adjustment;\n* For delta, vega and wealth, we use the shrown_excl_opts and price as of fiscal year end;\n* if opt_grts=0 and shares_grt=0 , then it is a long term performance award (equity or non-equity);\n* within long term performance award, it appears that some firms give options that are \n  earned on meeting specific performance criteria, while most give shares;\n* if opts_grt=. and shares_grt=. and non-equity=. but there is an equity award and exercise price given, \n  we assume that it is a performance award (EIP) with options;\n* we need to value these using B-S value of the options assuming target level payouts;\n* if opts_grt=. and shares_grt=. and non-equity=. and exercise price=. but there is an equity award\n  we assume that it is a performance award (EIP) with shares;\n* we need to value these using grant date stock price and assuming target level payouts;\n* if opts_grt=. and shares_grt=. and equity=. but non-equity is not missing, then \n  we assume that it is a non-equity performance award (NEIP);\n* we do not use the target/threshold etc. values of these as\n  non-equity awards are given in ANNCOMP (NONEQ_INCENT) based on actual payouts;\n* to calculate B-S value as on grant date, we need exdate;\n* but this is given only in the outstanding awards table;\n* so we try and match the two tables to pull the exdate from the outstanding awards table;\n* I am going to create a subset of planbasedawards so that we don't match\non missing  values;\n* 190  executibve years appear to have expric missing;\n* cannot do anything about this anyway;\n* going to indicate whether there is only 1 award per record or multiple awards per record;\n* this will affect the fair value calculation - when there are multiple awards per record \n (see example elsewhere in program, the fair value represents the cumulative fair value\n of all the awards. So we are trying to see how big a problem this is;\n\n data planbasedawards1;\n attrib granttype length=$14.;\n set planbasedawards;\n if opts_grt=. and shares_grt=. and (eq_max=. and eq_targ=. and eq_thres=.)\n   and (non_eq_max^=. or non_eq_targ^=. or non_eq_thres^=.) \n   then granttype = \"NEIP ONLY\";\n if opts_grt=. and shares_grt^=. and (eq_max=. and eq_targ=. and eq_thres=.)\n   and (non_eq_max=. and non_eq_targ=. and non_eq_thres=.) \n   then granttype = \"PURE STOCK\";\n else if opts_grt^=. and shares_grt=. and (eq_max=. and eq_targ=. and eq_thres=.) \n   and (non_eq_max=. and non_eq_targ=. and non_eq_thres=.) \n   then granttype = \"PURE OPTIONS\";\n else if opts_grt=. and shares_grt=. and (eq_max^=. or eq_targ^=. or eq_thres^=.) and expric^=. \n   and (non_eq_max=. and non_eq_targ=. and non_eq_thres=.) \n   then granttype = \"EIP OPTIONS\";\n  else if opts_grt=. and shares_grt=. and (eq_max^=. or eq_targ^=. or eq_thres^=.) and expric=.\n   and (non_eq_max=. and non_eq_targ=. and non_eq_thres=.) \n   then granttype = \"EIP STOCK\";\n  else if opts_grt=. and shares_grt=. and (eq_max=. and eq_targ=. and eq_thres=.)\n   and (non_eq_max=. and non_eq_targ=. and non_eq_thres=.) \n   then granttype = \"ALL MISSING\";\n   else granttype = \"MULTIPLE\";\n run;\n \n proc print data=planbasedawards1;\n * var coperol year eq_max eq_targ eq_thres expric non_eq_max non_eq_targ non_eq_thres;\n * where opts_grt=. and shares_grt=. and (eq_max^=. or eq_targ^=. or eq_thres^=.) and expric^=.;\n where coperol=11664;\n* where coperol=16285;\n  run;\n\n proc freq data=planbasedawards1;\n tables granttype;\n  title \"frequency of different types of plan based awards\";\n run;\n**/\n\n*================================;\n* READ DATA ON OUTSTANDING AWARDS;\n*================================;\n\n* this dataset has individual executive awards outstanding at end of fiscal year;\n* should have no duplicates by coperol, award number (outawdnum),and year;\n* data only available after 2006;\n* appears to have a lot of the same information as in coperol;\ndata outstandingawards;\n set execcomp.outstandingawards;\n coperol=co_per_rol;\n opts_vested_num = opts_unex_exer;\n opts_unvested_num = opts_unex_unexer;\n opts_unearned_num = opts_unex_unearn ;\n* round off the expric since this is sometimes rounded off in outstanding\n talbe but not in the planbased table, which creates problems with the merge;\n  expric = round(expric,0.01);\n keep coperol year eip_shrs_unvest_num eip_shrs_unvest_val expric\n  opts_vested_num opts_unvested_num opts_unearned_num outawdnum\n   shrs_unvest_num shrs_unvest_val exdate;\n proc sort nodupkey;\n   by coperol year outawdnum;\n/**\nproc contents data=common.outstandingawards;\n   title \"information on dataset outstandingawards\";\nrun;\n**/\n\n/**\nproc print data=outstandingawards;\n where coperol=16285;\n var year eip_shrs_unvest_num eip_shrs_unvest_val expric\n  opts_vested_num opts_unvested_num opts_unearned_num outawdnum\n   shrs_unvest_num shrs_unvest_val exdate;\n   title \"printing ibm post-2006 data on outstanding awards\";\n   title2 \"ibm changed reporting format in 2006 itself\";\n run;\n**/\n\n/* proc means data=outstandingawards noprint n mean p1 p25 p50 p75 p99; */\n/*  var opts_unearned_num; */\n/*  where opts_unearned_num&gt;0 and opts_unearned_num^=.; */\n/* run; */\n\nproc means data=outstandingawards noprint;\n    var opts_unearned_num;\n    where opts_unearned_num &gt; 0 and opts_unearned_num^=.;\n    output out=stats_out\n        n=n \n        mean=mean\n        p1=p1 \n        p25=p25 \n        p50=p50 \n        p75=p75 \n        p99=p99;\nrun;\n\n* we merge with outstanding awards to find the delta, vega, and value as of fiscal year end;\ndata excomp13_subset;\n set excomp13;\n  keep  coperol year shrown bs_yield fyenddt\n    sigmasq sigma prccf  year \n   oneyr twoyr threeyr fouryr fiveyr sixyr sevenyr eightyr nineyr tenyr;\nproc sort nodupkey;\n by coperol year;\nrun;\n\n* now we need to compute the deltas of the portfolio as of year end;\n* outstandingawards does not have the data to compute risk-free rate etc,\nso we merge these in from excomp12_subset;\n\nproc sql;\n create table outstandingawards1 as\n  select *\n  from outstandingawards  x left join excomp13_subset y\n on x.coperol=y.coperol and x.year=y.year;\n\n*proc contents data=outstandingawards1;\n*run;\n\n data outstandingawards1a; \n  set outstandingawards1;\n\n*if we want a 70% haircut, we need to apply it here for post-2006;\n  maturity_yearend = (exdate-fyenddt)/365;\n\n if round(maturity_yearend,1) =1  then rfyearend=oneyr;\n if round(maturity_yearend,1) =2  then rfyearend=twoyr;\n if round(maturity_yearend,1) =3  then rfyearend=threeyr;\n if round(maturity_yearend,1) =4  then rfyearend=fouryr;\n if round(maturity_yearend,1) =5  then rfyearend=fiveyr;\n if round(maturity_yearend,1) =6  then rfyearend=sixyr;\n if round(maturity_yearend,1) =7  then rfyearend=sevenyr;\n if round(maturity_yearend,1) =8  then rfyearend=eightyr;\n if round(maturity_yearend,1) =9  then rfyearend=nineyr;\n if round(maturity_yearend,1)=10  then rfyearend=tenyr;\n\n* sometimes maturity is greater than 10;\n if (maturity_yearend^=. and round(maturity_yearend,1)&gt;10) then rfyearend=tenyr;\n\n  Xc = expric;\n\n* calculate B-S values;\n\n Zc_yearend= (log(prccf/Xc)+ maturity_yearend*(rfyearend-bs_yield+sigmasq/2))/(sigma*sqrt( maturity_yearend));\n if maturity_yearend=. then Zc_yearend=.;\n\n\n * computing deltas;\n Sunvest_yearend= exp(-bs_yield*maturity_yearend)*probnorm(Zc_yearend)*opts_unvested_num*prccf/100;\n  if Zc_yearend=. then Sunvest_yearend=.;\n  if opts_unvested_num=. or opts_unvested_num=0 then Sunvest_yearend=0;\n\n Svest_yearend= exp(-bs_yield*maturity_yearend)*probnorm(Zc_yearend)*opts_vested_num*prccf/100;\n  if Zc_yearend=. then Svest_yearend=.;\n  if opts_vested_num=. or opts_vested_num=0 then Svest_yearend=0;\n\n* Black Scholes value of options at yearend;\n Vunvest_yearend= opts_unvested_num*(prccf*exp(-bs_yield* maturity_yearend)*probnorm(Zc_yearend)\n    -Xc*exp(-rfyearend*maturity_yearend)*probnorm(Zc_yearend-sigma*sqrt( maturity_yearend)));\n  if Zc_yearend=. then Vunvest_yearend=.;\n  if opts_unvested_num=. or opts_unvested_num=0 then Vunvest_yearend=0;\n\n Vvest_yearend= opts_vested_num*(prccf*exp(-bs_yield* maturity_yearend)*probnorm(Zc_yearend)\n    -Xc*exp(-rfyearend*maturity_yearend)*probnorm(Zc_yearend-sigma*sqrt( maturity_yearend)));\n  if Zc_yearend=. then Vvest_yearend=.;\n  if opts_vested_num=. or opts_vested_num=0 then Vvest_yearend=0;\n\n* sensitivity with respect to a 0.01 change in stock return volatility;\n* see core and guay appendix A;\n  if Zc_yearend^=. then do;\n   Runvest_yearend = exp(-bs_yield* maturity_yearend)*PDF('normal',Zc_yearend,0,1)*prccf*sqrt( maturity_yearend)*0.01*opts_unvested_num;\n  end;\n  if  Zc_yearend=. or maturity_yearend=. then Runvest_yearend=.;\n  if opts_unvested_num=. or opts_unvested_num=0 then Runvest_yearend=0;\n\n  if Zc_yearend^=. then do;\n   Rvest_yearend = exp(-bs_yield* maturity_yearend)*PDF('normal',Zc_yearend,0,1)*prccf*sqrt( maturity_yearend)*0.01*opts_vested_num;\n  end;\n  if  Zc_yearend=. or maturity_yearend=. then Rvest_yearend=.;\n  if opts_vested_num=. or opts_vested_num=0 then Rvest_yearend=0;\n \n drop oneyr twoyr threeyr fouryr fiveyr sixyr\n  sevenyr eightyr nineyr tenyr ;\n run;\n/**\n proc print data=outstandingawards1a;\n  where coperol=16285 and year&gt;1997;\n  var year outawdnum Zc_yearend Sunvest_yearend Runvest_yearend Vunvest_yearend \n    Svest_yearend Rvest_yearend Vvest_yearend maturity_yearend; \n    title \"calculating post-2006 numbers for ibm palmisano\";\n  run;\nproc print data=outstandingawards1a;\n where coperol=668 and year=2009 and maturity_yearend^=.;\n  var year sigma rfyearend bs_yield maturity_yearend; \n title \"print of BS estimates for Molson Coors\";\n title2 \"per proxy, company uses 28% volatility, 2.46% risk free rate, 2.29% dividend yield, and 5-7 year maturity\";\n run;\n **/\n\n* now aggregate from tranche level to coperol-year level;\n\nproc sql;\n create table outstandingawards2\n  as select *, \n    sum(opts_unvested_num) as sumunvested_num_opts,\n    sum(opts_vested_num) as sumvested_num_opts,\n    sum(Sunvest_yearend) as sumSunvest_yearend,\n    sum(Svest_yearend) as sumSvest_yearend,\n    sum(Runvest_yearend) as sumRunvest_yearend,\n    sum(Rvest_yearend) as sumRvest_yearend,\n    sum(Vunvest_yearend) as sumVunvest_yearend,\n    sum(Vvest_yearend) as sumVvest_yearend\n  from outstandingawards1a\ngroup by coperol,year;\n\n\ndata outstandingawards3;\n  set outstandingawards2;\n   if sumunvested_num_opts=0 or sumunvested_num_opts=. then do;\n     sumSunvest_yearend=0; \n     sumRunvest_yearend=0; \n     sumVunvest_yearend=0; \n   end;\n   if sumvested_num_opts=0 then do;\n     sumSvest_yearend=0; \n     sumRvest_yearend=0; \n     sumVvest_yearend=0; \n   end;\n\n* vega;\n  newRopt = sum(sumRvest_yearend, sumRunvest_yearend);\n\n* sensitivity of shareholdings;\n Sshr= shrown*prccf/100;\n\n* value of shareholdings;\n newVshr= shrown*prccf;\n newVportfolio_yearend = sum(sumVvest_yearend, sumVunvest_yearend, newVshr);\n\n* delta;\n  newdelta = sum(sumSvest_yearend, sumSunvest_yearend, Sshr);\n  newoptiondelta = sum(sumSvest_yearend, sumSunvest_yearend);\n  newsharedelta = Sshr;\n\ndrop opts_vested_num opts_unvested_num shrown;\n* at this point, we are going to keep only 1 observation per executive year;\n* since we have already added up the values of current year's grants, that \n is all we need to keep;\n\n* the following sort elimates 290,425 obs;\n* these are  executives reporting multiple stock grants outstanding at the end of each year;\nproc sort nodupkey ;\n by coperol year;\nrun;\n\n/**\nproc print data=outstandingawards3;\n where coperol=16285;\n var year newdelta newRopt sumSunvest_yearend sumSvest_yearend\n     sumRunvest_yearend sumRvest_yearend \n   sumVunvest_yearend sumVvest_yearend \n    newVshr  newVportfolio_yearend;\n    title \"calculating post-2006 numbers for ibm palmisano\";\nrun;\n**/\n\n* MERGING THEM TOGETHER;\n\nproc sql; \n create table excomp17 as\n  select *\n  from excomp16 x left join outstandingawards3 y\n  on x.coperol=y.coperol and x.year=y.year;\n  \ndata excomp18;\n set excomp17;\n if old_datafmt_flag=0 then do;\n   delta=newdelta;\n   optiondelta=newoptiondelta;\n   sharedelta=newsharedelta;\n   Ropt = newRopt;\n   Vportfolio_yearend = newVportfolio_yearend;\n end;\n firm_related_wealth=Vportfolio_yearend;\n vega=ropt;\n keep coperol year delta vega firm_related_wealth old_datafmt_flag tdc1 gvkey exec_fullname sharedelta optiondelta;\n* keep gvkey coperol year delta vega firm_related_wealth ;\n proc sort nodupkey;\n  by coperol year;\n/**\nproc means n mean median min max;\ntitle \"Final dataset\";\nrun;\n**/\n\n/**\n proc print data=excomp18;\n  var coperol year firm_related_wealth;\n  where coperol=984;\n  title \"printing for GE -WELCH to check with Sundaram-Yermack table 1\";\n   run;\n\nproc sort data=excomp18;\n by year;\n proc means noprint data=excomp18;\n  by year;\n  var delta vega firm_related_wealth ;\n  output out=out1 \n  mean=delta vega firm_related_wealth\n  n=ndelta nvega  nfirm_related_wealth ;\nrun;\n\nproc print data=out1;\ntitle \"Key variables\";\nrun;\n**/\n\nproc sort data=excomp18; by year coperol; run;\n\ndata delta_vega;\n  set excomp18;\n  keep gvkey coperol year delta vega firm_related_wealth sharedelta optiondelta;\nrun;\n\n/*\ndata deltavega;\n  set deltavega;\n  if optiondelta=0 then optiondelta=.;\n  if delta=0 then delta=.;\nrun;\n*/\n\nproc sort data=delta_vega out=mine.delta_vega; by gvkey year;run;\n\n/* endrsubmit; */\n/* signoff; */"
  },
  {
    "objectID": "pages/posts/items/20251114_deltaCalculation/index.html#what-i-have-adapted",
    "href": "pages/posts/items/20251114_deltaCalculation/index.html#what-i-have-adapted",
    "title": "Measures of Managerial Incentives",
    "section": "What I have adapted",
    "text": "What I have adapted\n\nWRDS FRB Interest Rate Series has updated its format and archived the old dataset (sample period up to 2020). The variables “TCMNOM_*” in the new dataset are renamed to “dgs*”, i.e., dgs1, dsg2, dgs3 and so on.\nSome coding issues in Kai’s self-contained program are corrected to be consistent with the original implementation by Lalitha Naveen.\nI changed crsp.ccmxpf_lnkhist and crsp.msf to quarterly updates datasets: crspq.ccmxpf_lnkhist and crspq.msf. Reason: UOA did not subscribe to the annual updates of CRSP, which is werid. But the quarterly updates are available, and they are more up-to-date."
  },
  {
    "objectID": "pages/about/index.html#coding-toolbox",
    "href": "pages/about/index.html#coding-toolbox",
    "title": "About Me",
    "section": "Coding Toolbox",
    "text": "Coding Toolbox\n\nMost in Python and Stata\nAlso use SQL, R, and a bit of Java\nDashboards and reporting: Power BI and Tableau\nStill enjoy a good LaTeX draft for automated reporting"
  }
]